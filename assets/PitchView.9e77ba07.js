var Le=Object.defineProperty;var Me=(i,e,t)=>e in i?Le(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var w=(i,e,t)=>(Me(i,typeof e!="symbol"?e+"":e,t),t);import{C as ee,P as Q,e as X,f as ce,g as L,h as D,i as M,j as de,d as I,k as P,o as h,c as g,a as n,t as u,r as fe,n as ae,u as l,l as V,m as te,w as z,p as ke,q as F,s as Re,b as c,v as re,F as E,x as B,y as le,z as H,_ as Oe,A as G,B as K,D as q,E as Ae,G as xe,H as x,I as Te,J as Fe}from"./index.d534f146.js";const Ve={cutMinimum:1},Ee={cardCount:1,isDealerFirst:!1},Ge={shuffleCount:1};class J extends Error{constructor(t){super(t.toString());w(this,"errorKey");this.name="CardError",this.errorKey=t}}class Ke{constructor(e){w(this,"_stack",[]);this.init(e)}get length(){return this._stack.length}pop(e){return e?this._stack.splice(this.length-(e>0?e:1)):this._stack.pop()}push(...e){this._stack.push(...e)}cut(e,t){if(t||(t=Ve),t.cutMinimum>this._stack.length)throw new J(ee.TABLE_400_CUT);if(!e){const r=Math.min(t.cutMinimum,this._stack.length-t.cutMinimum),o=Math.max(t.cutMinimum,this._stack.length-t.cutMinimum);e=Math.floor(Math.random()*(o-r)+r)}if(e<t.cutMinimum||e>this._stack.length-t.cutMinimum)throw new J(ee.TABLE_400_CUT);const s=this._stack.slice(0,e),a=this._stack.slice(e);this._stack=a.concat(s)}shuffle(e,t){e||(e=[]),t||(t=Ge);let s=this._stack.concat(e);for(let a=0;a<t.shuffleCount;a++){const r=s.slice(0,s.length/2),o=s.slice(s.length/2);for(s=[];r.length>0||o.length>0;){const p=r.length>0&&Math.random()<.5?r.pop():o.pop();p&&s.push(p)}}this._stack=s}init(e){console.debug(`[card] ${typeof this}.init`),this._stack.splice(0),e.cards.forEach(t=>this._stack.push(t))}}class He{deal(e,t){t||(t=Ee);const s=[];for(let a=0;a<t.cardCount;a++){const r=e.pop();r&&s.push(r)}return console.debug("[card] GenericDealer.deal",s),s}}class We{constructor(e,t){w(this,"_options");w(this,"_seats");w(this,"_currentDealer");this._options=t!=null?t:Ee,this._seats=[...e],this._currentDealer=0}get length(){return this._seats.length}get dealer(){return this._seats[this._currentDealer]}get leader(){return this._seats[this._currentLeader]}get last(){return this._seats[this.fix(this._currentLeader-1)]}peekNextDealer(){return this._seats[this.fix(this._currentDealer+1)]}peekNextLeader(){return this._seats[this.fix(this._currentLeader+1)]}setNext(){console.debug("[card] GenericTable.setNext (pre)",this._currentDealer,this._currentLeader);const e=this.peekNextLeader();return this._currentDealer=this.fix(this._currentDealer+1),console.debug("[card] GenericTable.setNext (post)",this._currentDealer,this._currentLeader),e}setNextDealer(e){console.debug("[card] GenericTable.setNextDealer (pre)",this._currentDealer,this._currentLeader);const t=this._seats.findIndex(s=>s.compare(e)===0);if(t<0)throw new J(ee.TABLE_404_NEXT);this._currentDealer=t,console.debug("[card] GenericTable.setNextDealer (post)",this._currentDealer,this._currentLeader)}setNextLeader(e){console.debug("[card] GenericTable.setNextLeader (pre)",this._currentDealer,this._currentLeader);const t=this._seats.findIndex(s=>s.compare(e)===0);if(t<0)throw new J(ee.TABLE_404_NEXT);this._currentDealer=this._options.isDealerFirst?t:this.fix(t-1),console.debug("[card] GenericTable.setNextLeader (post)",this._currentDealer,this._currentLeader)}*iterator(){for(let e=this._currentLeader;e<this._seats.length;e++)yield this._seats[e];for(let e=0;e<this._currentLeader;e++)yield this._seats[e]}get _currentLeader(){return this._options.isDealerFirst?this._currentDealer:this.fix(this._currentDealer+1)}fix(e){const t=this.length;return(e%t+t)%t}}const _e={verbose:!1,winningScore:11,bidderCount:2,teamCount:0,isBidFiveEnabled:!1,isBidNoneEnabled:!1,isAllowTrumpWhenCanFollowSuitEnabled:!0,isScoreTiedGamePointsEnabled:!0,shuffle:{shuffleCount:5},deal:{isDealerFirst:!1,cardCount:3},cut:{cutMinimum:1}};class Y extends Error{constructor(t){super(t.toString());w(this,"errorKey");this.name="PitchError",this.errorKey=t}}class be{constructor(e,t){w(this,"rank");w(this,"suit");this.suit=t,this.rank=e}compare(e){return this.suit.compare(e.suit)===0?this.rank.compare(e.rank):this.suit.compare(e.suit)}compareWeight(e,t,s){return this.suit.compareWeight(e.suit,t,s)===0?this.rank.compare(e.rank):this.suit.compareWeight(e.suit,t,s)}static groupBy(e,t){return e.reduce((s,a)=>{const r=t(a);return s[r]||(s[r]=[]),s[r].push(a),s},{})}}class R{constructor(e,t,s){w(this,"key");w(this,"game");w(this,"value");this.key=e,this.game=t,this.value=s}compare(e){return this.value-e.value}}class he{constructor(e,t){w(this,"key");w(this,"value");this.key=e,this.value=t}get colorKey(){switch(this.key){case D.CLUBS:case D.SPADES:return de.BLACK;case D.HEARTS:case D.DIAMONDS:return de.RED;default:return de.NA}}compare(e){return this.value-e.value}compareWeight(e,t,s){return this.compare(e)===0?0:s&&this.compare(s)===0?1:s&&e.compare(s)===0?-1:this.compare(t)===0?1:e.compare(t)===0?-1:0}}class Be{get clubs(){return new he(D.CLUBS,1)}get diamonds(){return new he(D.DIAMONDS,2)}get spades(){return new he(D.SPADES,3)}get hearts(){return new he(D.HEARTS,4)}get two(){return new R(M.TWO,0,2)}get three(){return new R(M.THREE,0,3)}get four(){return new R(M.FOUR,0,4)}get five(){return new R(M.FIVE,0,5)}get six(){return new R(M.SIX,0,6)}get seven(){return new R(M.SEVEN,0,7)}get eight(){return new R(M.EIGHT,0,8)}get nine(){return new R(M.NINE,0,9)}get ten(){return new R(M.TEN,10,10)}get jack(){return new R(M.JACK,1,11)}get queen(){return new R(M.QUEEN,2,12)}get king(){return new R(M.KING,3,13)}get ace(){return new R(M.ACE,4,14)}get ranks(){return[this.two,this.three,this.four,this.five,this.six,this.seven,this.eight,this.nine,this.ten,this.jack,this.queen,this.king,this.ace]}get suits(){return[this.clubs,this.diamonds,this.spades,this.hearts]}get cards(){const e=[];return this.suits.forEach(t=>this.ranks.forEach(s=>e.push(new be(s,t)))),e}}class ve extends Ke{}class we{constructor(e){w(this,"id");w(this,"cards");w(this,"name");this.id=crypto.randomUUID(),this.name=e,this.cards=[]}clearCards(){return this.cards.splice(0,this.cards.length)}compare(e){return this.id===e.id?0:this.name>e.name?1:-1}}class Ue{constructor(e,t,s){w(this,"id");w(this,"name");w(this,"team");w(this,"intelligence");w(this,"hand");this.id=crypto.randomUUID(),this.name=e,this.team=t!=null?t:new we(e),this.intelligence=s!=null?s:L.HUMAN,this.hand=[]}clearHand(){return this.hand.splice(0,this.hand.length)}reorderHand(){this.hand.sort((e,t)=>-e.compare(t))}play(e){const t=this.hand.findIndex(s=>s.compare(e)===0);if(t<0)throw new J(ee.CARD_404);return this.hand.splice(t,1)[0]}takeDeal(e){e.forEach(t=>this.hand.push(t))}takeTrick(e){e.forEach(t=>this.team.cards.push(t))}compare(e){return this.id===e.id?0:this.name>e.name?1:-1}}class Se extends We{get teams(){const e=[];for(const t of this.iterator())e.some(s=>s.compare(t.team)===0)||e.push(t.team);return e}get maxHandLength(){let e=0;for(const t of this.iterator())e=Math.max(t.hand.length,e);return e}}class je{constructor(e){w(this,"lead");w(this,"waste",[]);this.lead=e}get leadSuit(){if(!(this.waste.length<1))return this.waste[0].card.suit}getWinningPlay(e){const t=this.leadSuit;if(t){const s=[...this.waste].sort((a,r)=>-a.card.compareWeight(r.card,t,e));return console.debug("[pitch] PitchTrick.getWinner",s),s[0]}else return}static groupPlaysBy(e,t){return e.reduce((s,a)=>{const r=t(a);return s[r]||(s[r]=[]),s[r].push(a),s},{})}}class ze{constructor(e){w(this,"leader");w(this,"trump");w(this,"bid");w(this,"tricks");this.leader=e,this.tricks=[]}nextTrick(e){const t=new je(e);return this.tricks.push(t),t}}class Ie{constructor(e){w(this,"_factory");this._factory=e}in(e){return e.high+e.low+e.jack+e.game}net(e){const t=this.in(e);return t<e.bid?-e.bid:t}game(e){let t=0;return e.forEach(s=>t+=s.rank.game),t}score(e,t,s){return{calculation:t,bid:t.greatestBid&&t.greatestBid.team.compare(e)===0?t.greatestBid.value:0,high:t.highestTrump&&t.highestTrump.team.compare(e)===0?1:0,low:t.lowestTrump&&t.lowestTrump.team.compare(e)===0?1:0,jack:t.jackiestTrump&&t.jackiestTrump.team.compare(e)===0?1:0,game:t.greatestGame&&(t.greatestGame.teams.length<2||s.isScoreTiedGamePointsEnabled)&&t.greatestGame.teams.some(a=>a.compare(e)===0)?1:0}}calculate(e,t){const s={totalGame:0,lowestTrump:void 0,highestTrump:void 0,jackiestTrump:void 0},a=this._factory.jack;return e.forEach(r=>{s.totalGame+=r.rank.game,r.suit.compare(t)===0&&(!s.jackiestTrump&&r.rank.compare(a)===0&&(s.jackiestTrump=r),(!s.lowestTrump||r.rank.compare(s.lowestTrump.rank)<0)&&(s.lowestTrump=r),(!s.highestTrump||r.rank.compare(s.highestTrump.rank)>0)&&(s.highestTrump=r))}),s}calculateRound(e,t){if(!e.trump||!e.bid||e.tricks.length<6){console.debug("[pitch] PitchCalculator.calculateRound (no trump, no bid or not 6 tricks)",e.trump,e.bid,e.tricks.length);return}if(e.tricks.filter((o,p)=>p<6).some(o=>o.waste.length<t.length)){console.debug("[pitch] PitchCalculator.calculateRound (some trick has less cards than players)",e.tricks.map(o=>o.waste.length),t.length);return}const s={greatestBid:{team:e.bid.bidder.team,value:e.bid.bid},greatestGame:void 0,highestTrump:void 0,lowestTrump:void 0,jackiestTrump:void 0},a=t.teams,r=a.reduce((o,p)=>(o[p.id]=this.calculate(p.cards,e.trump),o),{});return console.debug("[pitch] PitchCalculator.calculateRound calculationsById",r),a.forEach(o=>{const p=r[o.id];if(!s.greatestGame||s.greatestGame.value<p.totalGame?s.greatestGame={teams:[o],value:p.totalGame}:s.greatestGame.value===p.totalGame&&s.greatestGame.teams.push(o),p.highestTrump&&(!s.highestTrump||s.highestTrump.value.compare(p.highestTrump)<0)&&(s.highestTrump={team:o,value:p.highestTrump}),p.lowestTrump&&(!s.lowestTrump||s.lowestTrump.value.compare(p.lowestTrump)>0)&&(s.lowestTrump={team:o,value:p.lowestTrump}),p.jackiestTrump){if(s.jackiestTrump)throw new Y(Q.CALC_500_EXTRA_JACK);s.jackiestTrump={team:o,value:p.jackiestTrump}}}),console.debug("[pitch] PitchCalculator.calculateRound found roundCalc",s),s}}class Ce{constructor(e,t){w(this,"_scores");w(this,"_calculator");this._scores=e.map(s=>({team:s,scores:[]})),this._calculator=t}getScoresForTeam(e){var t,s;return(s=(t=this._scores.find(a=>a.team.compare(e)===0))==null?void 0:t.scores)!=null?s:[]}getScoresForRound(e){return this._scores.some(t=>t.scores.length<=e)?[]:this._scores.map(t=>({team:t.team,score:t.scores[e]}))}getScoreForTeamAndRound(e,t){const s=this.getScoresForTeam(e);return t<s.length?s[t]:void 0}getScoreTotal(e){let t=0;return this.getScoresForTeam(e).forEach(s=>t+=this._calculator.net(s)),t}getWinner(e){e||(e=_e);const t=this._scores.filter(s=>this.getScoreTotal(s.team)>=e.winningScore).sort((s,a)=>a.scores[a.scores.length].bid-s.scores[s.scores.length-1].bid);if(t.length>0)return t[t.length-1].team}pushScores(e,t){t||(t=_e),e&&this._scores.forEach(s=>{s.scores.push(this._calculator.score(s.team,e,t))})}clear(){this._scores.forEach(e=>{e.scores.splice(0,e.scores.length)})}}class Ze{constructor(e,t,s,a,r,o,p,y){w(this,"_deck");w(this,"_rounds");w(this,"options");w(this,"factory");w(this,"table");w(this,"calculator");w(this,"scoreboard");w(this,"showCards");this.table=e,this.options=t!=null?t:_e,this.factory=s!=null?s:new Be,this.calculator=a!=null?a:new Ie(this.factory),this.scoreboard=o!=null?o:new Ce(this.table.teams,this.calculator),this._deck=r!=null?r:new ve(this.factory),this._rounds=p!=null?p:[],this.showCards=y!=null?y:!1}get deck(){return this._deck}get rounds(){return this._rounds}}class Xe extends He{async playPitch(e,t,s,a,r,o,p,y){let f;this.clearState(e);for(let d=this.nextRound(e);!f;d=this.nextRound(e)){e=await this.dealHands(e,y);const b=e.table.peekNextDealer();if(e=await this.takeBids(e,t,s,y),console.debug("[pitch] PitchDealer.playPitch (round.bid)",d.bid),!!d.bid){e.table.setNextLeader(d.bid.bidder);for(let v=d.nextTrick(e.table.leader);e.table.maxHandLength>0;v=d.nextTrick(e.table.leader))if(e=await this.takePlays(e,t,a,y),console.debug("[pitch] PitchDealer.playPitch (round.trump)",d.trump),d.trump){const k=v.getWinningPlay(d.trump);if(console.debug("[pitch] PitchDealer.playPitch (trick.getWinningPlay)",k),k)await r(e,k),e.table.setNextLeader(k.bidder);else throw new Y(Q.STATE_500_NO_TRICK_WINNER)}else throw new Y(Q.STATE_500_NO_TRUMP);e=await this.pushScores(e,o,y),e.table.setNextDealer(b),f=e.scoreboard.getWinner(e.options),console.debug("[pitch] PitchDealer.playPitch (state.scoreboard.getWinner)",f)}}return await p(e,f),e}async dealHands(e,t){this.clearCards(e),e.deck.shuffle(void 0,e.options.shuffle);for(const s of[1,2])for(const a of e.table.iterator()){const r=e.deck.pop(),o=e.deck.pop(),p=e.deck.pop();if(r&&o&&p)a.takeDeal([r,o,p]),a.reorderHand(),await t(e);else throw new J(ee.DECK_500_EMPTY)}return e}async takeBids(e,t,s,a){var o;const r=e.rounds[e.rounds.length-1];for(const p of e.table.iterator()){e.showCards=await t(e,p),await a(e);let y=await s(e,p),f=0;for(let d=this.validateBid(e,y);d!=X.VALID;d=this.validateBid(e,y)){if(await a(e),f++>10)throw new Y(Q.PLAY_400_TOO_MANY_ATTEMPTS);console.debug("[pitch] PitchDealer.takeBids (attempt, reason, bid)",f++,d,y),y=await s(e,p,d)}console.debug("[pitch] PitchDealer.takeBids (bid)",y),y.skip||(r.bid=y),console.debug("[pitch] PitchDealer.takeBids (round.bid)",r.bid),e.showCards=!1,await a(e)}return r.bid&&e.table.setNextLeader((o=r.bid)==null?void 0:o.bidder),e}async takePlays(e,t,s,a){var y;const r=e.rounds[e.rounds.length-1],o=r.tricks[r.tricks.length-1];for(const f of e.table.iterator()){e.showCards=await t(e,f),await a(e,"showing cards to bidder...");let d=await s(e,f),b=0;for(let k=this.validatePlay(e,{bidder:f,card:d});k!=ce.VALID;k=this.validatePlay(e,{bidder:f,card:d})){if(await a(e,"validation result... "+k),b++>10)throw new Y(Q.PLAY_400_TOO_MANY_ATTEMPTS);console.debug("[pitch] PitchDealer.takePlays (attempt, reason, selectedCard)",b,k,d),d=await s(e,f,k)}console.debug("[pitch] PitchDealer.takePlays (selectedCard)",d);const v=f.play(d);if(console.debug("[pitch] PitchDealer.takePlays (playedCard)",v),await a(e,"card taken from bidder hand..."),!v)throw new J(ee.CARD_404);r.trump=(y=r.trump)!=null?y:v.suit,console.debug("[pitch] PitchDealer.takePlays (round.trump)",r.trump),o.waste.push({bidder:f,card:v}),e.showCards=!1,await a(e,"card placed in waste...")}if(!r.trump)throw new Y(Q.STATE_500_NO_TRUMP);const p=o.getWinningPlay(r.trump);if(!p)throw new Y(Q.TRICK_500_NO_WINNER);return p.bidder.team.cards.push(...o.waste.map(f=>f.card)),e.table.setNextLeader(p.bidder),await a(e,"trick completed with winner as next leader..."),e}async pushScores(e,t,s){const a=e.rounds[e.rounds.length-1];console.debug("[pitch] PitchDealer.pushScores (calculating)",a,e.table);const r=e.calculator.calculateRound(a,e.table);return console.debug("[pitch] PitchDealer.pushScores (calculation)",r),r&&(e.scoreboard.pushScores(r,e.options),await s(e),await t(e,r)),await s(e),e}nextRound(e){const t=new ze(e.table.leader);return e.rounds.push(t),t}clearCards(e){const t=[];for(const s of e.table.iterator())t.push(...s.clearHand()),s.team.cards.length>0&&t.push(...s.team.clearCards());t.length+e.deck.length!==52&&console.warn(`[pitch] someone stole a card... ${e.deck.length} cards in deck, ${t.length} cards from players and teams...`,t),e.deck.init(e.factory)}clearState(e){this.clearCards(e),e.scoreboard.clear(),e.rounds.splice(0),e.showCards=!1}validateBid(e,t){const s=e.rounds[e.rounds.length-1];if(t.skip){if(e.options.isBidNoneEnabled)return X.VALID;if(Array.from(e.table.iterator())[e.table.length-1].compare(t.bidder)===0&&!s.bid)return X.NO_BID}else{if(e.options.isBidFiveEnabled&&t.bid>5)return X.EXCEED_5;if(t.bid>4)return X.EXCEED_4;if(t.bid<2)return X.LESS_THAN_2;if(s.bid&&t.bid<=s.bid.bid)return X.NOT_EXCEED_BID}return X.VALID}validatePlay(e,t){const s=e.rounds[e.rounds.length-1],a=s.tricks[s.tricks.length-1];return t.bidder.hand.some(r=>r.compare(t.card)===0)?e.options.isAllowTrumpWhenCanFollowSuitEnabled&&s.trump&&t.card.suit.compare(s.trump)===0?ce.VALID:a.leadSuit&&t.card.suit.compare(a.leadSuit)!==0&&t.bidder.hand.some(r=>r.suit.compare(a.leadSuit)===0)?ce.NOT_FOLLOWING_SUIT:ce.VALID:ce.NOT_IN_HAND}async retry(e,t,s){return await t.catch(async a=>{if(e<=0)throw a;return s&&s(a),await this.retry(e-1,t)})}}class qe{decideBid(e,t){var o,p;const a=(p=(o=t.rounds[t.rounds.length-1].bid)==null?void 0:o.bid)!=null?p:1;console.debug("[pitch] PitchAIBaby.decideBid",a,e);const r=this.decideWorthBySuit(e.hand,t.factory);return console.debug("[pitch] PitchAIBaby.decideBid",r),r.some(y=>y.worth>a)?(console.log("[pitch] PitchAIBaby.decideBid, AI is bidding",a+1),{bid:a+1,bidder:e,skip:!1}):t.table.last.compare(e)===0&&a<2&&!t.options.isBidNoneEnabled?(console.log("[pitch] PitchAIBaby.decideBid, AI is forced to bid..."),{bid:2,bidder:e,skip:!1}):(console.log("[pitch] PitchAIBaby.decideBid, AI is skipping..."),{bid:0,bidder:e,skip:!0})}decidePlay(e,t){var f,d;const s=t.rounds[t.rounds.length-1],a=s.tricks[s.tricks.length-1],r=[...e.hand];console.debug("[pitch] PitchAIBaby.decidePlay (bidder, hand)",e,r);const o=(f=s.trump)!=null?f:this.decideTrump(r,t.factory);console.debug("[pitch] PitchAIBaby.decidePlay (given trump, desired trump, lead suit)",s.trump,o,a.leadSuit);const p=(d=a.leadSuit)!=null?d:s.trump?this.decideLead(r,o,t.factory):o,y=r.sort((b,v)=>-b.compareWeight(v,p,s.trump?t.options.isAllowTrumpWhenCanFollowSuitEnabled?o:void 0:o));return console.debug("[pitch] PitchAIBaby.decidePlay (lead, sorted)",p,y),y[0]}decideTrump(e,t){return this.decideWorthBySuit(e,t).sort((r,o)=>o.worth-r.worth)[0].suit}decideLead(e,t,s){const a=s.jack;return e.some(r=>r.rank.compare(a)>0)||!e.some(r=>r.suit.compare(t)!=0)?t:e.filter(o=>o.suit.compare(t)!=0).sort((o,p)=>p.rank.compare(o.rank))[0].suit}decideWorthBySuit(e,t){const s=t.jack,a=t.queen,r=t.king,o=t.ace,p=[...new Set(e.map(d=>d.suit))],y=be.groupBy(e,d=>d.suit.key),f=be.groupBy(e,d=>d.rank.key.toString()+d.suit.key.toString());return p.map(d=>{var W,U,j,se,ie,ne,S,C,$,_;const b=(U=(W=y[d.key])==null?void 0:W.length)!=null?U:0,v=(se=(j=f[s.key.toString()+d.key.toString()])==null?void 0:j.length)!=null?se:0,k=(ne=(ie=f[a.key.toString()+d.key.toString()])==null?void 0:ie.length)!=null?ne:0,A=(C=(S=f[r.key.toString()+d.key.toString()])==null?void 0:S.length)!=null?C:0,O=(_=($=f[o.key.toString()+d.key.toString()])==null?void 0:$.length)!=null?_:0;return O>0&&A>0&&k>0&&b>5?{suit:d,worth:5}:v>0&&(A>0||O>0)&&b>3?{suit:d,worth:4}:(O>0||A>0||k>0)&&(v>0&&b>2||b>3)?{suit:d,worth:3}:(O>0||A>0)&&b>1||(O>0||A>0||k>0)&&b>2?{suit:d,worth:2}:{suit:d,worth:1}})}}class Ye{selectIntelligence(e){switch(e){case L.ARTIFICIAL:return new qe;default:return}}}const Je=n("div",{class:"modal-background"},null,-1),Qe={class:"modal-card"},et={class:"modal-card-head"},tt={class:"modal-card-title"},st={class:"modal-card-body"},it={class:"modal-card-foot"},ge=I({__name:"ModalCard",props:{active:{type:Boolean},titleKey:null,titleParams:null},emits:["close"],setup(i,{emit:e}){const t=i,s=P(()=>t.active?["modal","is-active"]:["modal"]);return(a,r)=>(h(),g("div",{class:ae(l(s))},[Je,n("div",Qe,[n("header",et,[n("p",tt,u(i.titleParams?a.$t(i.titleKey,[...i.titleParams]):a.$t(i.titleKey)),1),n("button",{class:"delete","aria-label":"close",onClick:r[0]||(r[0]=o=>e("close"))})]),n("section",st,[fe(a.$slots,"default")]),n("footer",it,[fe(a.$slots,"footer")])])],2))}}),me=I({__name:"ModalAlert",props:{messageKey:null,messageParams:null,titleKey:null,titleParams:null},setup(i){const e=V(!0);function t(){return!0}return(s,a)=>(h(),te(ge,{active:e.value,"title-key":i.titleKey,"title-params":i.titleParams,onClose:a[0]||(a[0]=r=>l(F)(t()))},{default:z(()=>[ke(u(s.$t(i.messageKey,i.messageParams?i.messageParams:[])),1)]),_:1},8,["active","title-key","title-params"]))}}),nt={class:"level"},lt={class:"level-item"},at={class:"level-item"},rt=I({__name:"ModalBooleanPrompt",props:{labelTrue:null,labelFalse:null,message:null,titleKey:null,titleParams:null},setup(i){const e=V(!0);function t(){return!1}return(s,a)=>(h(),te(ge,{active:e.value,"title-key":i.titleKey,"title-params":i.titleParams,onClose:a[2]||(a[2]=r=>l(F)(t))},{default:z(()=>[ke(u(i.message),1)]),footer:z(()=>[n("div",nt,[n("div",lt,[n("button",{id:"yes-no-prompt-yes",class:"button",onClick:a[0]||(a[0]=r=>l(F)(!0))},u(i.labelTrue),1)]),n("div",at,[n("button",{id:"yes-no-prompt-no",class:"button",onClick:a[1]||(a[1]=r=>l(F)(!1))},u(i.labelFalse),1)])])]),_:1},8,["active","title-key","title-params"]))}}),ot=(i,e)=>e.filter((t,s)=>s<i).map(t=>new we(t.name)),ct=(i,e,t)=>e.filter((s,a)=>a<i).map((s,a,r)=>{const o=t.length<1||r.length%t.length!==0?new we(s.name):t[a%t.length];return new Ue(s.name,o,s.intelligence)}),ue=new Be,pe=new Ie(ue),ut=[{name:"I-Robot",intelligence:L.ARTIFICIAL},{name:"Myself",intelligence:L.HUMAN},{name:"R2-D2",intelligence:L.ARTIFICIAL},{name:"WALL-E",intelligence:L.ARTIFICIAL},{name:"Terminator",intelligence:L.ARTIFICIAL},{name:"Marvin",intelligence:L.ARTIFICIAL},{name:"HAL",intelligence:L.ARTIFICIAL},{name:"Bender",intelligence:L.ARTIFICIAL}],dt=[{name:"Robots"},{name:"Humans"},{name:"Lobsters"},{name:"Whistlers"}],oe=Re("pitch",{state:()=>({factory:ue,calculator:pe,options:{..._e},deck:new ve(ue),table:new Se([]),rounds:[],scoreboard:new Ce([],pe),showCards:!1,teamConfigs:[...dt],bidderConfigs:[...ut],currentRound:void 0,currentTrick:void 0}),getters:{validIntelligences:()=>[L.HUMAN,L.ARTIFICIAL],validWinningScores:()=>[11,21],validShuffleCounts:()=>[1,2,3,4,5,6,7,8,9],validCutCounts:()=>{const i=[];for(let e=1;e<52;e++)i.push(e);return i},validBidderCounts:()=>[2,3,4,5,6,7,8],validTeamCounts:i=>{const e=[0];return[2,4,6,8].includes(i.options.bidderCount)&&e.push(2),[3,6].includes(i.options.bidderCount)&&e.push(3),[4,8].includes(i.options.bidderCount)&&e.push(4),e},currentBidders:i=>ct(i.options.bidderCount,i.bidderConfigs,ot(i.options.teamCount,i.teamConfigs)),currentState:i=>new Ze(i.table,i.options,ue,pe,i.deck,i.scoreboard,i.rounds,i.showCards),currentScore:i=>e=>i.scoreboard.getScoreTotal(e)},actions:{initCards(){},initializeState(){this.deck=new ve(ue),this.table=new Se(this.currentBidders),this.rounds=[],this.scoreboard=new Ce(this.table.teams,pe),this.showCards=!1,this.currentRound=void 0,this.currentTrick=void 0},setOptionVerbosity(i){this.options.verbose=i},setOptionWinningScore(i){if(!this.validWinningScores.includes(i))throw new Error(c.pitch.errors.OPTIONS_400);this.options.winningScore=i},setOptionBidderCount(i){if(!this.validBidderCounts.includes(i))throw new Error(c.pitch.errors.OPTIONS_400);this.options.bidderCount=i,this.validTeamCounts.includes(this.options.teamCount)||(this.options.teamCount=0),this.initializeState()},setOptionTeamCount(i){if(!this.validTeamCounts.includes(i))throw new Error(c.pitch.errors.OPTIONS_400);this.options.teamCount=i,this.initializeState()},setTeamConfigName(i,e){if(e>=this.teamConfigs.length)throw new Error(c.pitch.errors.STATE_404_TEAM);this.teamConfigs[e].name=i,this.initializeState()},setTeamConfigs(i){this.teamConfigs=i,this.initializeState()},setBidderConfigName(i,e){if(e>=this.bidderConfigs.length)throw new Error(c.pitch.errors.STATE_404_BIDDER);this.bidderConfigs[e].name=i,this.initializeState()},setBidderConfigIntelligence(i,e){if(e>=this.bidderConfigs.length)throw new Error(c.pitch.errors.STATE_404_BIDDER);this.bidderConfigs[e].intelligence=i,this.initializeState()},setBidderConfigs(i){this.bidderConfigs=i,this.initializeState()},setOptionBidFive(i){this.options.isBidFiveEnabled=i},setOptionBidNone(i){this.options.isBidNoneEnabled=i},setOptionAllowTrumpWhenCanFollowSuit(i){this.options.isAllowTrumpWhenCanFollowSuitEnabled=i},setOptionScoreTiedGamePionts(i){this.options.isScoreTiedGamePointsEnabled=i},setOptionShuffleCount(i){if(!this.validShuffleCounts.includes(i))throw new Error(c.pitch.errors.OPTIONS_400);this.options.shuffle.shuffleCount=i},setOptionCutMin(i){if(!this.validCutCounts.includes(i))throw new Error(c.pitch.errors.OPTIONS_400);this.options.cut.cutMinimum=i},setPitchState(i){this.table=i.table,this.options=i.options,this.deck=i.deck,this.scoreboard=i.scoreboard,this.rounds=i.rounds,this.showCards=i.showCards,this.currentRound=this.rounds[this.rounds.length-1],this.currentTrick=this.currentRound.tricks[this.currentRound.tricks.length-1]}}}),ht={xmlns:"http://www.w3.org/2000/svg",style:{width:"24px",height:"24px"},viewBox:"0 0 24 24"},mt=["fill"],pt=["fill"],_t=["fill"],gt=["fill"],ft=["fill"],bt=I({__name:"IconSuitOutline",props:{suit:null,color:null},setup(i){const e=i,t=P(()=>e.color===de.RED?"red":"black");return(s,a)=>(h(),g("svg",ht,[i.suit===l(D).CLUBS?(h(),g("path",{key:0,fill:l(t),d:"M16.6 9.5C16.8 8.9 17 8.2 17 7.5C17 4.5 14.8 2 12 2S7 4.5 7 7.5C7 8.2 7.1 8.9 7.4 9.5C4.9 9.6 3 11.4 3 13.8C3 16.3 5 18 7.5 18C7.5 18 10 18 11 17C11 17 11.3 19 9 22H15C12.7 19 13 17 13 17C14 18 16.5 18 16.5 18C19 18 21 16.3 21 13.8C21 11.4 19.1 9.6 16.6 9.5M16.5 16C16.5 16 14 16 13 15H11C10 16 7.5 16 7.5 16C6.3 16 5 15.3 5 13.8C5 12.5 6.1 11.5 7.5 11.5C7.8 11.5 8.3 11.6 8.8 11.7C8.9 11.7 9 11.8 9.1 11.8L10 10.1C9.8 9.9 9.7 9.7 9.6 9.5C9.2 8.9 9 8.3 9 7.5C9 5.6 10.3 4 12 4S15 5.6 15 7.5C15 8.3 14.8 9 14.4 9.6C14.3 9.8 14.2 9.9 14.1 10.1L15 11.8C15.1 11.8 15.2 11.7 15.3 11.7C15.7 11.6 16.2 11.5 16.6 11.5C18 11.5 19.1 12.5 19.1 13.8C19 15.3 17.7 16 16.5 16Z"},null,8,mt)):i.suit===l(D).DIAMONDS?(h(),g("path",{key:1,fill:l(t),d:"M12 2L5 12L12 22L19 12M7.44 12L12 5.5L16.56 12L12 18.5"},null,8,pt)):i.suit===l(D).HEARTS?(h(),g("path",{key:2,fill:l(t),d:"M12.1 18.55L12 18.65L11.89 18.55C7.14 14.24 4 11.39 4 8.5C4 6.5 5.5 5 7.5 5C9.04 5 10.54 6 11.07 7.36H12.93C13.46 6 14.96 5 16.5 5C18.5 5 20 6.5 20 8.5C20 11.39 16.86 14.24 12.1 18.55M16.5 3C14.76 3 13.09 3.81 12 5.08C10.91 3.81 9.24 3 7.5 3C4.42 3 2 5.41 2 8.5C2 12.27 5.4 15.36 10.55 20.03L12 21.35L13.45 20.03C18.6 15.36 22 12.27 22 8.5C22 5.41 19.58 3 16.5 3Z"},null,8,_t)):i.suit===l(D).SPADES?(h(),g("path",{key:3,fill:l(t),d:"M11 17C11 17 11.3 19 9 22H15C12.7 19 13 17 13 17S14 18 16 18 20 16 20 14C20 9 15 7 12 2C9 7 4 9 4 14C4 16 6 18 8 18S11 17 11 17M13 14H11C11 14 10 16 8 16C7.1 16 6 14.9 6 14C5.8 11 9.9 8.2 12 5.4C14.1 8.1 18.2 10.9 18 14C18 14.9 16.9 16 16 16C14 16 13 14 13 14Z"},null,8,gt)):(h(),g("path",{key:4,fill:l(t),d:"M11,18H13V16H11V18M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,6A4,4 0 0,0 8,10H10A2,2 0 0,1 12,8A2,2 0 0,1 14,10C14,12 11,11.75 11,15H13C13,12.75 16,12.5 16,10A4,4 0 0,0 12,6Z"},null,8,ft))]))}}),vt={id:"pitch-scoreboard",class:"columns"},Ct={id:"pitch-scoreboard-game",class:"column"},kt={id:"pitch-scoreboard-scores-table",class:"table"},wt={key:0},yt={id:"pitch-scoreboard-round",class:"column"},Tt={id:"pitch-scoreboard-round-table",class:"table"},St=I({__name:"PitchScoreboard",setup(i){const{table:e,rounds:t,currentScore:s,currentRound:a}=re(oe()),r=V(!0),o=P(()=>{var f,d;return(d=(f=a.value)==null?void 0:f.trump)==null?void 0:d.key}),p=P(()=>{var f,d;return(d=(f=a.value)==null?void 0:f.trump)==null?void 0:d.colorKey}),y=P(()=>{var d;const f=(d=a.value)==null?void 0:d.bid;return f?`${f.bid} (${f.bidder.name})`:""});return(f,d)=>(h(),g("div",vt,[n("div",Ct,[n("table",kt,[n("thead",null,[n("tr",null,[n("th",null,u(f.$t(l(c).label_team)),1),(h(!0),g(E,null,B(l(e).teams,b=>(h(),g("td",{key:b.id},u(b.name),1))),128))])]),r.value?le("",!0):(h(),g("tbody",wt)),n("tfoot",null,[n("tr",null,[n("th",null,u(f.$t(l(c).label_total)),1),(h(!0),g(E,null,B(l(e).teams,b=>(h(),g("td",{key:b.id},u(l(s)(b)),1))),128))])])])]),n("div",yt,[n("table",Tt,[n("thead",null,[n("tr",null,[n("th",null,u(f.$t(l(c).label_trump)),1),n("th",null,u(f.$t(l(c).label_bid)),1),n("th",null,u(f.$t(l(c).label_round)),1)])]),n("tbody",null,[n("tr",null,[n("td",null,[l(o)&&l(p)?(h(),te(bt,{key:0,suit:l(o),color:l(p)},null,8,["suit","color"])):le("",!0)]),n("td",null,u(l(y)),1),n("td",null,u(l(t).length),1)])])])])]))}}),Pt={xmlns:"http://www.w3.org/2000/svg",style:{width:"24px",height:"24px"},viewBox:"0 0 24 24"},$t=["fill"],At=["fill"],Et=["fill"],Bt=["fill"],It=["fill"],Pe=I({__name:"IconSuitSolid",props:{suit:null,color:null},setup(i){const e=i,t=P(()=>e.color===de.RED?"red":"black");return(s,a)=>(h(),g("svg",Pt,[i.suit===l(D).CLUBS?(h(),g("path",{key:0,fill:l(t),d:"M12,2C14.3,2 16.3,4 16.3,6.2C16.21,8.77 14.34,9.83 14.04,10C15.04,9.5 16.5,9.5 16.5,9.5C19,9.5 21,11.3 21,13.8C21,16.3 19,18 16.5,18C16.5,18 15,18 13,17C13,17 12.7,19 15,22H9C11.3,19 11,17 11,17C9,18 7.5,18 7.5,18C5,18 3,16.3 3,13.8C3,11.3 5,9.5 7.5,9.5C7.5,9.5 8.96,9.5 9.96,10C9.66,9.83 7.79,8.77 7.7,6.2C7.7,4 9.7,2 12,2Z"},null,8,$t)):i.suit===l(D).DIAMONDS?(h(),g("path",{key:1,fill:l(t),d:"M19,12L12,22L5,12L12,2"},null,8,At)):i.suit===l(D).HEARTS?(h(),g("path",{key:2,fill:l(t),d:"M12,21.35L10.55,20.03C5.4,15.36 2,12.27 2,8.5C2,5.41 4.42,3 7.5,3C9.24,3 10.91,3.81 12,5.08C13.09,3.81 14.76,3 16.5,3C19.58,3 22,5.41 22,8.5C22,12.27 18.6,15.36 13.45,20.03L12,21.35Z"},null,8,Et)):i.suit===l(D).SPADES?(h(),g("path",{key:3,fill:l(t),d:"M12,2C9,7 4,9 4,14C4,16 6,18 8,18C9,18 10,18 11,17C11,17 11.32,19 9,22H15C13,19 13,17 13,17C14,18 15,18 16,18C18,18 20,16 20,14C20,9 15,7 12,2Z"},null,8,Bt)):(h(),g("path",{key:4,fill:l(t),d:"M15.07,11.25L14.17,12.17C13.45,12.89 13,13.5 13,15H11V14.5C11,13.39 11.45,12.39 12.17,11.67L13.41,10.41C13.78,10.05 14,9.55 14,9C14,7.89 13.1,7 12,7A2,2 0 0,0 10,9H8A4,4 0 0,1 12,5A4,4 0 0,1 16,9C16,9.88 15.64,10.67 15.07,11.25M13,19H11V17H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12C22,6.47 17.5,2 12,2Z"},null,8,It))]))}}),Dt={key:0,class:"playing-card-face is-nw"},Nt={key:1,class:"playing-card-face is-ne"},Lt={key:2,class:"playing-card-face is-sw"},Mt={key:3,class:"playing-card-face is-se"},Rt=I({__name:"PitchCard",props:{card:null,show:{type:Boolean}},setup(i){return(e,t)=>(h(),g("div",{id:"pitch-card",class:ae(["card","box","is-hoverable","playing-card",i.show?"face-up":"face-down"])},[i.show?(h(),g("span",Dt,u(e.$t(l(c).mapCardRank(i.card.rank.key))),1)):le("",!0),i.show?(h(),g("span",Nt,[H(Pe,{suit:i.card.suit.key,color:i.card.suit.colorKey},null,8,["suit","color"])])):le("",!0),i.show?(h(),g("span",Lt,[H(Pe,{suit:i.card.suit.key,color:i.card.suit.colorKey},null,8,["suit","color"])])):le("",!0),i.show?(h(),g("span",Mt,u(e.$t(l(c).mapCardRank(i.card.rank.key))),1)):le("",!0)],2))}});const De=Oe(Rt,[["__scopeId","data-v-4e7a08b2"]]),Ot={id:"pitch-trick",class:"columns is-multiline is-centered is-mobile"},xt={key:0,class:"tags"},Ft={class:"tag is-primary"},Vt={key:1,class:"tags has-addons"},Gt={class:"tag is-primary"},Kt={class:"tag is-light"},Ht=I({__name:"PitchTrick",setup(i){const{currentTrick:e}=re(oe());return(t,s)=>{var a,r;return h(),g("div",Ot,[(h(!0),g(E,null,B((r=(a=l(e))==null?void 0:a.waste)!=null?r:[],o=>(h(),g("div",{key:o.card.rank.key.toString()+o.card.suit.key.toString(),class:"column is-narrow"},[H(De,{card:o.card,show:!0},null,8,["card"]),o.bidder.name===o.bidder.team.name?(h(),g("div",xt,[n("span",Ft,u(o.bidder.name),1)])):(h(),g("div",Vt,[n("span",Gt,u(o.bidder.name),1),n("span",Kt,u(o.bidder.team.name),1)]))]))),128))])}}}),Wt={class:"level is-mobile",id:"pitch-messages"},Ut=I({__name:"PitchFooter",emits:["play","config","exit"],setup(i,{emit:e}){return(t,s)=>(h(),g("div",Wt,[n("button",{class:"level-item button",onClick:s[0]||(s[0]=a=>e("play"))},u(t.$t(l(c).label_play)),1),n("button",{class:"level-item button",onClick:s[1]||(s[1]=a=>e("config"))},u(t.$t(l(c).label_configure)),1),n("button",{class:"level-item button",onClick:s[2]||(s[2]=a=>e("exit"))},u(t.$t(l(c).label_exit)),1)]))}}),jt={class:"container"},zt={class:"content"},Zt=n("div",{class:"block"},null,-1),Xt={id:"pitch-hand-cards",class:"content"},qt={class:"columns is-multiline is-centered is-mobile"},Yt=n("div",{class:"block"},null,-1),Ne=I({__name:"PitchHandWrapper",props:{bidder:null},emits:["selectCardIndex"],setup(i,{emit:e}){const{showCards:t}=re(oe());return(s,a)=>(h(),g("div",jt,[n("div",zt,[fe(s.$slots,"default")]),Zt,n("div",Xt,[n("div",qt,[(h(!0),g(E,null,B(i.bidder.hand,(r,o)=>(h(),g("div",{class:"column is-narrow",key:r.rank.key.toString()+r.suit.key.toString()},[H(De,{card:r,show:l(t),onClick:p=>e("selectCardIndex",r,o,...i.bidder.hand)},null,8,["card","show","onClick"])]))),128)),Yt])])]))}}),Jt={class:"container"},Qt={id:"pitch-bid-bid",class:"content"},es={class:"select"},ts=["disabled","selected","value"],ss={id:"pitch-bid-submit",class:"content level is-mobile"},is=["disabled"],ns=I({__name:"PitchBidPrompt",props:{bidder:null},setup(i){const e=i,{currentState:t,currentRound:s}=re(oe()),a=V(0),r=V(!0),o=P(()=>{var b;return t.value.options.isBidNoneEnabled||((b=s.value)==null?void 0:b.bid)||t.value.table.last.compare(e.bidder)!==0}),p=P(()=>{var v;const b=(v=s.value)==null?void 0:v.bid;return[{bid:2,enabled:!b||b.bid<2},{bid:3,enabled:!b||b.bid<3},{bid:4,enabled:!b||b.bid<4},{bid:5,enabled:t.value.options.isBidFiveEnabled&&(!b||b.bid<5)}]});function y(){return r.value=!1,{bidder:e.bidder,bid:a.value,skip:!1}}function f(){r.value=!1,F(y())}function d(){r.value=!1,F({bidder:e.bidder,bid:0,skip:!0})}return(b,v)=>(h(),te(Ne,{bidder:i.bidder},{default:z(()=>[n("div",Jt,[n("section",Qt,[ke(u(b.$t(l(c).message_bid_for,[i.bidder.name]))+" ",1),n("div",es,[G(n("select",{"onUpdate:modelValue":v[0]||(v[0]=k=>a.value=k)},[(h(!0),g(E,null,B(l(p),k=>(h(),g("option",{disabled:!k.enabled,selected:k.bid===a.value,value:k.bid,key:k.bid},u(k.bid),9,ts))),128))],512),[[K,a.value]])])]),n("section",ss,[n("button",{class:"level-item button is-success",onClick:v[1]||(v[1]=k=>f())},u(b.$t(l(c).label_bid_submit)),1),n("button",{class:"level-item button",disabled:!l(o),onClick:v[2]||(v[2]=k=>d())},u(b.$t(l(c).label_bid_skip)),9,is)])])]),footer:z(()=>[]),_:1},8,["bidder"]))}}),ls={class:"level"},as=n("div",{class:"block"},null,-1),rs=I({__name:"PitchHandPrompt",props:{bidder:null},setup(i){const e=i,t=V(0);function s(r,o){t.value=o,F(r)}function a(){if(t.value<e.bidder.hand.length)return e.bidder.hand[t.value]}return(r,o)=>(h(),te(Ne,{bidder:i.bidder,onSelectCardIndex:s,onClose:o[0]||(o[0]=p=>l(F)(a()))},{default:z(()=>[n("div",ls,[n("p",null,u(r.$t(l(c).message_play_for,[i.bidder.name])),1)]),as]),_:1},8,["bidder"]))}}),os={class:"subtitle"},cs={class:"column"},us=["value","onChange"],ds={class:"column is-one-fourth"},hs={class:"select is-small"},ms=["onUpdate:modelValue","on:update:modelValue"],ps=["selected","value"],_s={class:"subtitle"},gs={class:"column"},fs=["value","onChange"],bs={id:"state-options",class:"section box"},vs={class:"subtitle"},Cs={class:"tile is-parent is-12"},ks={class:"tile is-child is-6"},ws={class:"tile is-child container"},ys={class:"select is-small"},Ts=["selected","value"],Ss={class:"tile is-parent is-12"},Ps={class:"tile is-child is-6"},$s={class:"tile is-child container"},As={class:"select is-small"},Es=["selected","value"],Bs={class:"tile is-parent is-12"},Is={class:"tile is-child is-6"},Ds={class:"tile is-child container"},Ns={class:"select is-small"},Ls=["selected","value"],Ms={class:"tile is-parent is-12"},Rs={class:"tile is-child is-6"},Os={class:"tile is-child container"},xs={class:"select is-small"},Fs=["selected","value"],Vs={class:"tile is-parent is-12"},Gs={class:"tile is-child is-6"},Ks={class:"tile is-child container"},Hs={class:"select is-small"},Ws=["selected","value"],Us={class:"tile is-parent is-12"},js={class:"tile is-child is-6"},zs={class:"tile is-child container"},Zs={class:"select is-small"},Xs=["selected","value"],qs={class:"tile is-parent is-12"},Ys={class:"tile is-child is-6"},Js={class:"tile is-child"},Qs={class:"select is-small"},ei=["selected","value"],ti={class:"tile is-parent is-12"},si={class:"tile is-child is-6"},ii={class:"tile is-child container"},ni={class:"select is-small"},li=["selected","value"],ai=I({__name:"PitchConfigPrompt",setup(i){const e=oe(),{currentState:t,validBidderCounts:s,validTeamCounts:a,validShuffleCounts:r,validIntelligences:o,validWinningScores:p}=re(e),y=V(!0),f=P({get(){return t.value.options.winningScore},set(_){e.setOptionWinningScore(_)}}),d=P({get(){return t.value.options.bidderCount},set(_){e.setOptionBidderCount(_)}}),b=P({get(){return t.value.options.teamCount},set(_){e.setOptionTeamCount(_)}}),v=P({get(){return e.teamConfigs},set(_){e.setTeamConfigs(_)}}),k=P({get(){return e.bidderConfigs},set(_){e.setBidderConfigs(_)}}),A=P({get(){return t.value.options.isBidFiveEnabled},set(_){e.setOptionBidFive(_)}}),O=P({get(){return t.value.options.isBidNoneEnabled},set(_){e.setOptionBidNone(_)}}),W=P({get(){return t.value.options.isAllowTrumpWhenCanFollowSuitEnabled},set(_){e.setOptionAllowTrumpWhenCanFollowSuit(_)}}),U=P({get(){return t.value.options.isScoreTiedGamePointsEnabled},set(_){e.setOptionScoreTiedGamePionts(_)}}),j=P({get(){return t.value.options.shuffle.shuffleCount},set(_){e.setOptionShuffleCount(_)}});function se(_,T){_<v.value.length&&e.setTeamConfigName(T,_)}function ie(_,T){_<k.value.length&&e.setBidderConfigName(T,_)}function ne(_,T){_<k.value.length&&e.setBidderConfigIntelligence(T,_)}function S(_){switch(_){case L.ARTIFICIAL:return c.label_artificial;case L.HUMAN:return c.label_human}}function C(){F($())}function $(){return!0}return(_,T)=>(h(),te(ge,{"title-key":l(c).pitch.title_configuration,active:y.value,onClose:C},{default:z(()=>[n("section",{id:"state-table-bidders",class:ae(l(d)>0?"section box":"is-hidden")},[n("h3",os,u(_.$t(l(c).pitch.subtitle_configuration_bidders)),1),(h(!0),g(E,null,B(l(k).filter((m,Z)=>Z<l(d)),(m,Z)=>(h(),g("div",{class:"columns is-mobile",key:m.name},[n("div",cs,[n("input",{class:"input is-small",id:"state-table-bidder-name",type:"text",value:m.name,onChange:N=>ie(Z,N.target.value)},null,40,us)]),n("div",ds,[n("div",hs,[G(n("select",{id:"state-table-bidder-intelligence","onUpdate:modelValue":N=>m.intelligence=N,"on:update:modelValue":N=>ne(Z,N)},[(h(!0),g(E,null,B(l(o),N=>(h(),g("option",{selected:N===m.intelligence,value:N,key:N},u(_.$t(S(N))),9,ps))),128))],40,ms),[[K,m.intelligence]])])])]))),128))],2),n("section",{id:"state-table-teams",class:ae(l(b)>0?"section box":"is-hidden")},[n("h3",_s,u(_.$t(l(c).pitch.subtitle_configuration_teams)),1),(h(!0),g(E,null,B(l(v).filter((m,Z)=>Z<l(b)),(m,Z)=>(h(),g("div",{class:"columns is-mobile",key:m.name},[n("div",gs,[n("input",{class:"input is-small",id:"state-table-team-name",type:"text",value:m.name,onChange:N=>{var ye;return se(Z,(ye=N==null?void 0:N.target)==null?void 0:ye.value)}},null,40,fs)])]))),128))],2),n("section",bs,[n("h3",vs,u(_.$t(l(c).pitch.subtitle_configuration_options)),1),n("div",Cs,[n("div",ks,[n("label",null,u(_.$t(l(c).label_option_winning_score)),1)]),n("div",ws,[n("div",ys,[G(n("select",{id:"state-options-winning-score","onUpdate:modelValue":T[0]||(T[0]=m=>q(f)?f.value=m:null)},[(h(!0),g(E,null,B(l(p),m=>(h(),g("option",{selected:m===l(f),value:m,key:m},u(m),9,Ts))),128))],512),[[K,l(f)]])])])]),n("div",Ss,[n("div",Ps,[n("label",null,u(_.$t(l(c).label_option_player_count)),1)]),n("div",$s,[n("div",As,[G(n("select",{id:"state-options-bidder-count","onUpdate:modelValue":T[1]||(T[1]=m=>q(d)?d.value=m:null)},[(h(!0),g(E,null,B(l(s),m=>(h(),g("option",{selected:m===l(d),value:m,key:m},u(m),9,Es))),128))],512),[[K,l(d)]])])])]),n("div",Bs,[n("div",Is,[n("label",null,u(_.$t(l(c).label_option_team_count)),1)]),n("div",Ds,[n("div",Ns,[G(n("select",{id:"state-options-team-count","onUpdate:modelValue":T[2]||(T[2]=m=>q(b)?b.value=m:null)},[(h(!0),g(E,null,B(l(a),m=>(h(),g("option",{selected:m===l(b),value:m,key:m},u(m),9,Ls))),128))],512),[[K,l(b)]])])])]),n("div",Ms,[n("div",Rs,[n("label",null,u(_.$t(l(c).label_option_bid_5)),1)]),n("div",Os,[n("div",xs,[G(n("select",{id:"state-options-enable-bid5","onUpdate:modelValue":T[3]||(T[3]=m=>q(A)?A.value=m:null)},[(h(),g(E,null,B([!0,!1],m=>n("option",{selected:m===l(A),value:m,key:m.toString()},u(_.$t(m?l(c).label_enabled:l(c).label_disabled)),9,Fs)),64))],512),[[K,l(A)]])])])]),n("div",Vs,[n("div",Gs,[n("label",null,u(_.$t(l(c).label_option_bid_all_skip)),1)]),n("div",Ks,[n("div",Hs,[G(n("select",{id:"state-options-enable-bid-all-skip","onUpdate:modelValue":T[4]||(T[4]=m=>q(O)?O.value=m:null)},[(h(),g(E,null,B([!0,!1],m=>n("option",{selected:m===l(O),value:m,key:m.toString()},u(_.$t(m?l(c).label_enabled:l(c).label_disabled)),9,Ws)),64))],512),[[K,l(O)]])])])]),n("div",Us,[n("div",js,[n("label",null,u(_.$t(l(c).label_option_play_trump_despite_lead)),1)]),n("div",zs,[n("div",Zs,[G(n("select",{id:"state-options-enable-trump-over-lead","onUpdate:modelValue":T[5]||(T[5]=m=>q(W)?W.value=m:null)},[(h(),g(E,null,B([!0,!1],m=>n("option",{selected:m===l(W),value:m,key:m.toString()},u(_.$t(m?l(c).label_enabled:l(c).label_disabled)),9,Xs)),64))],512),[[K,l(W)]])])])]),n("div",qs,[n("div",Ys,[n("label",null,u(_.$t(l(c).label_option_score_tied_game)),1)]),n("div",Js,[n("div",Qs,[G(n("select",{id:"state-options-enable-score-tied-game","onUpdate:modelValue":T[6]||(T[6]=m=>q(U)?U.value=m:null)},[(h(),g(E,null,B([!0,!1],m=>n("option",{selected:m===l(U),value:m,key:m.toString()},u(_.$t(m?l(c).label_enabled:l(c).label_disabled)),9,ei)),64))],512),[[K,l(U)]])])])]),n("div",ti,[n("div",si,[n("label",null,u(_.$t(l(c).label_option_shuffle_count)),1)]),n("div",ii,[n("div",ni,[G(n("select",{id:"state-options-shuffle-count","onUpdate:modelValue":T[7]||(T[7]=m=>q(j)?j.value=m:null)},[(h(!0),g(E,null,B(l(r),m=>(h(),g("option",{selected:m===l(j),value:m,key:m},u(m),9,li))),128))],512),[[K,l(j)]])])])])])]),footer:z(()=>[n("button",{class:"button",type:"submit",onClick:C},u(_.$t(l(c).label_exit_configuration)),1)]),_:1},8,["title-key","active"]))}}),ri={class:"table"},oi=n("th",null,null,-1),ci={class:"table"},ui=n("th",null,null,-1),di=I({__name:"PitchRoundAlert",props:{calculator:null,calculation:null,options:null},setup(i){const e=i,{t}=Ae({useScope:"global"}),s=V(!0),a=P(()=>e.calculation.greatestBid?{team:e.calculation.greatestBid.team.name,value:e.calculation.greatestBid.value.toString()}:{team:t(c.field_none),value:t(c.field_none)}),r=P(()=>e.calculation.highestTrump?{team:e.calculation.highestTrump.team.name,value:d(e.calculation.highestTrump.value)}:{team:t(c.field_none),value:t(c.field_none)}),o=P(()=>e.calculation.lowestTrump?{team:e.calculation.lowestTrump.team.name,value:d(e.calculation.lowestTrump.value)}:{team:t(c.field_none),value:t(c.field_none)}),p=P(()=>e.calculation.jackiestTrump?{team:e.calculation.jackiestTrump.team.name,value:d(e.calculation.jackiestTrump.value)}:{team:t(c.field_none),value:t(c.field_none)}),y=P(()=>{if(e.calculation.greatestGame){let v="";return e.calculation.greatestGame.teams.forEach(k=>v+=k.name+"|"),{team:v.substring(0,v.length-1),value:e.calculation.greatestGame.value}}else return{team:t(c.field_none),value:t(c.field_none)}}),f=P(()=>{let v=[];return e.calculation.greatestGame&&e.calculation.greatestGame.teams.forEach(k=>v.push(k)),e.calculation.greatestBid&&!v.some(k=>k.compare(e.calculation.greatestBid.team)===0)&&v.push(e.calculation.greatestBid.team),e.calculation.highestTrump&&!v.some(k=>k.compare(e.calculation.highestTrump.team)===0)&&v.push(e.calculation.highestTrump.team),e.calculation.lowestTrump&&!v.some(k=>k.compare(e.calculation.lowestTrump.team)===0)&&v.push(e.calculation.lowestTrump.team),e.calculation.jackiestTrump&&!v.some(k=>k.compare(e.calculation.jackiestTrump.team)===0)&&v.push(e.calculation.jackiestTrump.team),v});function d(v){return t(c.mapCardRank(v.rank.key))+" "+t(c.mapCardSuit(v.suit.key))}function b(){return s.value=!1,!0}return(v,k)=>(h(),te(ge,{"title-key":l(c).title_round_over,active:s.value,onClose:k[0]||(k[0]=A=>l(F)(b()))},{default:z(()=>[n("table",ri,[n("thead",null,[n("tr",null,[oi,n("th",null,u(l(t)(l(c).label_bid)),1),n("th",null,u(l(t)(l(c).label_high)),1),n("th",null,u(l(t)(l(c).label_low)),1),n("th",null,u(l(t)(l(c).label_jack)),1),n("th",null,u(l(t)(l(c).label_game)),1)])]),n("tbody",null,[n("tr",null,[n("th",null,u(l(t)(l(c).label_value)),1),n("td",null,u(l(a).value),1),n("td",null,u(l(r).value),1),n("td",null,u(l(o).value),1),n("td",null,u(l(p).value),1),n("td",null,u(l(y).value),1)]),n("tr",null,[n("th",null,u(l(t)(l(c).label_team)),1),n("td",null,u(l(a).team),1),n("td",null,u(l(r).team),1),n("td",null,u(l(o).team),1),n("td",null,u(l(p).team),1),n("td",null,u(l(y).team),1)])])]),n("table",ci,[n("thead",null,[n("tr",null,[ui,(h(!0),g(E,null,B(l(f),A=>(h(),g("th",{key:A.id},u(A.name),1))),128))])]),n("tbody",null,[n("tr",null,[n("th",null,u(l(t)(l(c).label_netscore)),1),(h(!0),g(E,null,B(l(f),A=>(h(),g("td",{key:A.id},u(i.calculator.net(i.calculator.score(A,i.calculation,i.options))),1))),128))])])])]),_:1},8,["title-key","active"]))}}),hi={class:"container"},mi={class:"content level"},$e=I({__name:"PitchAlert",props:{closeKey:null,messageKey:null,messageParams:null,messageClasses:null},setup(i){function e(){return!0}return(t,s)=>{var a;return h(),g("div",hi,[n("div",mi,[n("p",{class:ae(["level-item"].concat(...(a=i.messageClasses)!=null?a:[]))},u(i.messageParams?t.$t(i.messageKey,i.messageParams):t.$t(i.messageKey)),3),n("button",{class:"level-item button",onClick:s[0]||(s[0]=r=>l(F)(e()))},u(t.$t(i.closeKey)),1)])])}}});const pi={id:"pitch-game",class:"container"},_i={id:"pitch-game-scoreboard",class:"section box"},gi={id:"pitch-game-trick",class:"section box"},fi={id:"pitch-game-messages",class:""},bi=I({__name:"PitchGame",setup(i){const{t:e}=Ae({useScope:"global"}),t=Fe(),s=oe(),{currentState:a}=re(s),r=V([]),o=new Ye,p=V(!1);function y(S){console.error(S),r.value.unshift(...S.map(C=>({text:C,classes:["has-text-danger-dark"]})))}function f(S){console.log(S),r.value.unshift(...S.map(C=>({text:C,classes:["has-text-success-dark"]})))}function d(){r.value=[]}async function b(){await x(ai,{})}async function v(){var C;const S=new Xe;try{s.initializeState(),await S.playPitch(a.value,O,se,ie,W,U,j,ne),await k()}catch($){if(console.error($),$){let _=(C=$.message)!=null?C:e(c.errors.NA_500);if($ instanceof Y){let T=$.errorKey;_=e(c.mapPitchError(T),[T])}else if($ instanceof J){let T=$.errorKey;_=e(c.mapCardError(T),[T])}await x(me,{titleKey:c.title_error,messageKey:c.message_error_of,messageParams:[_]}),y([_])}}}async function k(){await x(rt,{titleKey:c.title_game_over,message:c.message_play_again,labelTrue:c.label_yes,labelFalse:c.label_no})?await v():await A()}async function A(){t.push("/")}async function O(S,C){return o.selectIntelligence(C.intelligence)?!0:await x(me,{titleKey:c.title_turn_for,titleParams:[C.name],messageKey:c.message_turn_for,messageParams:[C.name]})}async function W(S,C){console.debug("[components.pitch] PitchGame.alertOfTrickResult",C),await x($e,{closeKey:c.label_continue,messageKey:c.message_trick_winner_for,messageParams:[C.bidder.name]},"pitch-notice")}async function U(S,C){console.debug("[components.pitch] PitchGame.alertOfRoundResult",C),await x(di,{calculator:S.calculator,calculation:C,options:S.options},"pitch-notice")}async function j(S,C){console.debug("[components.pitch] PitchGame.alertOfGameResult",C),await x($e,{closeKey:c.label_continue,messageKey:c.message_winner_for,messageParams:[C.name]},"pitch-notice")}async function se(S,C,$){let _=o.selectIntelligence(C.intelligence);if(_)return _.decideBid(C,S);{$&&await x(me,{titleKey:c.pitch.title_invalid_bid_for,titleParams:[C.name],messageKey:c.mapPitchBidVal($)}),p.value=!0;const T=await x(ns,{bidder:C},"pitch-hand");return p.value=!1,T}}async function ie(S,C,$){let _=o.selectIntelligence(C.intelligence);return _?_.decidePlay(C,S):($&&await x(me,{titleKey:c.pitch.title_invalid_play_for,titleParams:[C.name],messageKey:c.mapPitchPlayVal($)}),p.value=!0,await x(rs,{bidder:C},"pitch-hand").then(T=>(p.value=!1,T)))}async function ne(S,C){C&&f([C]),s.setPitchState(S)}return xe(()=>b()),(S,C)=>(h(),g("div",pi,[n("header",_i,[H(St)]),n("section",gi,[H(Ht),H(l(Te),{name:"pitch-notice","transition-attrs":{name:"pitch-hand"}})]),n("section",{id:"pitch-game-move",class:ae(p.value?["section","box"]:["hidden"])},[H(l(Te),{name:"pitch-hand","transition-attrs":{name:"pitch-hand"}})],2),n("footer",fi,[H(Ut,{messages:r.value,onPlay:C[0]||(C[0]=$=>v()),onClear:C[1]||(C[1]=$=>d()),onConfig:C[2]||(C[2]=$=>b()),onExit:C[3]||(C[3]=$=>A())},null,8,["messages"])])]))}}),vi={class:"pitch"},wi=I({__name:"PitchView",setup(i){const e=V(!0);return(t,s)=>(h(),g("div",vi,[H(bi,{modelValue:e.value,"onUpdate:modelValue":s[0]||(s[0]=a=>e.value=a)},null,8,["modelValue"])]))}});export{wi as default};
