var De=Object.defineProperty;var Ne=(l,e,t)=>e in l?De(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t;var C=(l,e,t)=>(Ne(l,typeof e!="symbol"?e+"":e,t),t);import{f as se,g as Be,h as Le,i as Me,j as pe,p as E,e as c,k as F,l as ne,m as x,n as Oe,d as D,u as Y,q as $,o as h,c as m,a as n,t as u,b as i,r as Ce,s as le,v as K,w as ie,x as J,y as we,z,A as te,B as ae,F as B,C as A,D as ce,E as j,_ as Re,G as R,H as G,I as U,J as Ge,K as W,L as Te,M as Fe}from"./index.5443e1c4.js";class Ke{constructor(e){C(this,"_stack");this._stack=[],e.cards.forEach(t=>this._stack.push(t))}get length(){return this._stack.length}pop(e){return e?this._stack.splice(this.length-(e>0?e:1)):this._stack.pop()}push(...e){this._stack.push(...e)}cut(e,t){if(t||(t=Le),t.cutMinimum>this._stack.length)throw new Error(se.TABLE_400_CUT);if(!e){const r=Math.min(t.cutMinimum,this._stack.length-t.cutMinimum),o=Math.max(t.cutMinimum,this._stack.length-t.cutMinimum);e=Math.floor(Math.random()*(o-r)+r)}if(e<t.cutMinimum||e>this._stack.length-t.cutMinimum)throw new Error(se.TABLE_400_CUT);let s=this._stack.slice(0,e),a=this._stack.slice(e);this._stack=a.concat(s)}shuffle(e,t){e||(e=[]),t||(t=Me);let s=this._stack.concat(e);for(let a=0;a<t.shuffleCount;a++){let r=s.slice(0,s.length/2),o=s.slice(s.length/2);for(s=[];r.length>0||o.length>0;){let _=r.length>0&&Math.random()<.5?r.pop():o.pop();_&&s.push(_)}}this._stack=s}}class Ve{deal(e,t){t||(t=Be);const s=[];for(let a=0;a<t.cardCount;a++){let r=e.pop();r&&s.push(r)}return console.debug("[card] GenericDealer.deal",s),s}}class We{constructor(e,t){C(this,"_options");C(this,"_seats");C(this,"_currentDealer");this._options=t!=null?t:Be,this._seats=[...e],this._currentDealer=0}get length(){return this._seats.length}get dealer(){return this._seats[this._currentDealer]}get leader(){return this._seats[this._currentLeader]}get last(){return this._seats[this.fix(this._currentLeader-1)]}peekNextDealer(){return this._seats[this.fix(this._currentDealer+1)]}peekNextLeader(){return this._seats[this.fix(this._currentLeader+1)]}setNext(){console.debug("[card] GenericTable.setNext (pre)",this._currentDealer,this._currentLeader);const e=this.peekNextLeader();return this._currentDealer=this.fix(this._currentDealer+1),console.debug("[card] GenericTable.setNext (post)",this._currentDealer,this._currentLeader),e}setNextDealer(e){console.debug("[card] GenericTable.setNextDealer (pre)",this._currentDealer,this._currentLeader);const t=this._seats.findIndex(s=>s.compare(e)===0);if(t<0)throw new Error(se.TABLE_404_NEXT);this._currentDealer=t,console.debug("[card] GenericTable.setNextDealer (post)",this._currentDealer,this._currentLeader)}setNextLeader(e){console.debug("[card] GenericTable.setNextLeader (pre)",this._currentDealer,this._currentLeader);const t=this._seats.findIndex(s=>s.compare(e)===0);if(t<0)throw new Error(se.TABLE_404_NEXT);this._currentDealer=this.fix(t-1),console.debug("[card] GenericTable.setNextLeader (post)",this._currentDealer,this._currentLeader)}*iterator(){for(let e=this._currentLeader;e<this._seats.length;e++)yield this._seats[e];for(let e=0;e<this._currentLeader;e++)yield this._seats[e]}get _currentLeader(){return this._options.isDealerFirst?this._currentDealer:this.fix(this._currentDealer+1)}fix(e){const t=this.length;return(e%t+t)%t}}class me{constructor(e,t){C(this,"rank");C(this,"suit");this.suit=t,this.rank=e}compare(e){return this.suit.compare(e.suit)===0?this.rank.compare(e.rank):this.suit.compare(e.suit)}compareWeight(e,t,s){return this.suit.compareWeight(e.suit,t,s)===0?this.rank.compare(e.rank):this.suit.compareWeight(e.suit,t,s)}static groupBy(e,t){return e.reduce((s,a)=>{const r=t(a);return s[r]||(s[r]=[]),s[r].push(a),s},{})}}class M{constructor(e,t,s){C(this,"key");C(this,"game");C(this,"value");this.key=e,this.game=t,this.value=s}compare(e){return this.value-e.value}}class de{constructor(e,t,s){C(this,"key");C(this,"colorKey");C(this,"value");this.key=e,this.value=s,this.colorKey=t}compare(e){return this.value-e.value}compareWeight(e,t,s){return this.compare(e)===0?0:s&&this.compare(s)===0?1:s&&e.compare(s)===0?-1:this.compare(t)===0?1:e.compare(t)===0?-1:0}}class Ae{get clubs(){return new de(F.CLUBS,ne.BLACK,1)}get diamonds(){return new de(F.DIAMONDS,ne.RED,2)}get spades(){return new de(F.SPADES,ne.BLACK,3)}get hearts(){return new de(F.HEARTS,ne.RED,4)}get two(){return new M(x.TWO,0,2)}get three(){return new M(x.THREE,0,3)}get four(){return new M(x.FOUR,0,4)}get five(){return new M(x.FIVE,0,5)}get six(){return new M(x.SIX,0,6)}get seven(){return new M(x.SEVEN,0,7)}get eight(){return new M(x.EIGHT,0,8)}get nine(){return new M(x.NINE,0,9)}get ten(){return new M(x.TEN,10,10)}get jack(){return new M(x.JACK,1,11)}get queen(){return new M(x.QUEEN,2,12)}get king(){return new M(x.KING,3,13)}get ace(){return new M(x.ACE,4,14)}get ranks(){return[this.two,this.three,this.four,this.five,this.six,this.seven,this.eight,this.nine,this.ten,this.jack,this.queen,this.king,this.ace]}get suits(){return[this.clubs,this.diamonds,this.spades,this.hearts]}get cards(){let e=[];return this.suits.forEach(t=>this.ranks.forEach(s=>e.push(new me(s,t)))),e}}class ge extends Ke{}class ke{constructor(e){C(this,"id");C(this,"cards");C(this,"name");this.id=crypto.randomUUID(),this.name=e,this.cards=[]}compare(e){return this.id===e.id?0:this.name>e.name?1:-1}}class He{constructor(e,t,s){C(this,"id");C(this,"name");C(this,"team");C(this,"intelligence");C(this,"hand");this.id=crypto.randomUUID(),this.name=e,this.team=t!=null?t:new ke(e),this.intelligence=s!=null?s:c.card.HUMAN,this.hand=[]}resetHand(){return this.hand.splice(0,this.hand.length)}reorderHand(){this.hand.sort((e,t)=>-e.compare(t))}play(e){let t=this.hand.findIndex(s=>s.compare(e)===0);if(t<0)throw new Error(se.CARD_404);return this.hand.splice(t,1)[0]}takeDeal(e){e.forEach(t=>this.hand.push(t))}takeTrick(e){e.forEach(t=>this.team.cards.push(t))}compare(e){return this.id===e.id?0:this.name>e.name?1:-1}}class Pe extends We{get teams(){let e=[];for(let t of this.iterator())e.some(s=>s.compare(t.team)===0)||e.push(t.team);return e}get maxHandLength(){let e=0;for(let t of this.iterator())e=Math.max(t.hand.length,e);return e}}class Ue{constructor(e){C(this,"lead");C(this,"waste",[]);this.lead=e}get leadSuit(){if(!(this.waste.length<1))return this.waste[0].card.suit}getWinningPlay(e){const t=this.leadSuit;if(t){let s=[...this.waste].sort((a,r)=>-a.card.compareWeight(r.card,t,e));return console.debug("[pitch] PitchTrick.getWinner",s),s[0]}else return}static groupPlaysBy(e,t){return e.reduce((s,a)=>{const r=t(a);return s[r]||(s[r]=[]),s[r].push(a),s},{})}}class je{constructor(e){C(this,"leader");C(this,"trump");C(this,"bid");C(this,"tricks");this.leader=e,this.tricks=[]}nextTrick(e){const t=new Ue(e);return this.tricks.push(t),t}}class $e{constructor(e){C(this,"_factory");this._factory=e}in(e){return e.high+e.low+e.jack+e.game}net(e){let t=this.in(e);return t<e.bid?-e.bid:t}game(e){let t=0;return e.forEach(s=>t+=s.rank.game),t}score(e,t,s){return{calculation:t,bid:t.greatestBid&&t.greatestBid.team.compare(e)===0?t.greatestBid.value:0,high:t.highestTrump&&t.highestTrump.team.compare(e)===0?1:0,low:t.lowestTrump&&t.lowestTrump.team.compare(e)===0?1:0,jack:t.jackiestTrump&&t.jackiestTrump.team.compare(e)===0?1:0,game:t.greatestGame&&(t.greatestGame.teams.length<2||s.isScoreTiedGamePointsEnabled)&&t.greatestGame.teams.some(a=>a.compare(e)===0)?1:0}}calculate(e,t){let s={totalGame:0,lowestTrump:void 0,highestTrump:void 0,jackiestTrump:void 0};const a=this._factory.jack;return e.forEach(r=>{s.totalGame+=r.rank.game,r.suit.compare(t)===0&&(!s.jackiestTrump&&r.rank.compare(a)===0&&(s.jackiestTrump=r),(!s.lowestTrump||r.rank.compare(s.lowestTrump.rank)<0)&&(s.lowestTrump=r),(!s.highestTrump||r.rank.compare(s.highestTrump.rank)>0)&&(s.highestTrump=r))}),s}calculateRound(e,t){if(!e.trump||!e.bid||e.tricks.length<6){console.debug("[pitch] PitchCalculator.calculateRound (no trump, no bid or not 6 tricks)",e.trump,e.bid,e.tricks.length);return}if(e.tricks.filter((o,_)=>_<6).some(o=>o.waste.length<t.length)){console.debug("[pitch] PitchCalculator.calculateRound (some trick has less cards than players)",e.tricks.map(o=>o.waste.length),t.length);return}let s={greatestBid:{team:e.bid.bidder.team,value:e.bid.bid},greatestGame:void 0,highestTrump:void 0,lowestTrump:void 0,jackiestTrump:void 0},a=t.teams,r=a.reduce((o,_)=>(o[_.id]=this.calculate(_.cards,e.trump),o),{});return console.debug("[pitch] PitchCalculator.calculateRound calculationsById",r),a.forEach(o=>{let _=r[o.id];if(!s.greatestGame||s.greatestGame.value<_.totalGame?s.greatestGame={teams:[o],value:_.totalGame}:s.greatestGame.value===_.totalGame&&s.greatestGame.teams.push(o),_.highestTrump&&(!s.highestTrump||s.highestTrump.value.compare(_.highestTrump)<0)&&(s.highestTrump={team:o,value:_.highestTrump}),_.lowestTrump&&(!s.lowestTrump||s.lowestTrump.value.compare(_.lowestTrump)>0)&&(s.lowestTrump={team:o,value:_.lowestTrump}),_.jackiestTrump){if(s.jackiestTrump)throw new Error(E.CALC_500_EXTRA_JACK);s.jackiestTrump={team:o,value:_.jackiestTrump}}}),console.debug("[pitch] PitchCalculator.calculateRound found roundCalc",s),s}}class fe{constructor(e,t){C(this,"_scores");C(this,"_calculator");this._scores=e.map(s=>({team:s,scores:[]})),this._calculator=t}getScoresForTeam(e){var t,s;return(s=(t=this._scores.find(a=>a.team.compare(e)===0))==null?void 0:t.scores)!=null?s:[]}getScoresForRound(e){return this._scores.some(t=>t.scores.length<=e)?[]:this._scores.map(t=>({team:t.team,score:t.scores[e]}))}getScoreForTeamAndRound(e,t){let s=this.getScoresForTeam(e);return t<s.length?s[t]:void 0}getScoreTotal(e){let t=0;return this.getScoresForTeam(e).forEach(s=>t+=this._calculator.net(s)),t}getWinner(e){e||(e=pe);let t=this._scores.filter(s=>this.getScoreTotal(s.team)>=e.winningScore).sort(s=>s.scores[s.scores.length-1].bid);if(t.length>0)return t[t.length-1].team}pushScores(e,t){t||(t=pe),e&&this._scores.forEach(s=>{s.scores.push(this._calculator.score(s.team,e,t))})}}class ze{constructor(e,t,s,a,r,o,_,w){C(this,"_deck");C(this,"_rounds");C(this,"_scoreboard");C(this,"options");C(this,"factory");C(this,"table");C(this,"calculator");C(this,"showCards");this.table=e,this.options=t!=null?t:pe,this.factory=s!=null?s:new Ae,this.calculator=a!=null?a:new $e(this.factory),this._deck=r!=null?r:new ge(this.factory),this._scoreboard=o!=null?o:new fe(this.table.teams,this.calculator),this._rounds=_!=null?_:[],this.showCards=w!=null?w:!1}get deck(){return this._deck}get rounds(){return this._rounds}get scoreboard(){return this._scoreboard}nextRound(e){const t=new je(e);return this.rounds.push(t),t}resetCards(){let e=[];for(let t of this.table.iterator())e.push(...t.hand.splice(0));for(let t of this.table.teams)e.push(...t.cards.splice(0));e.length+this._deck.length!==52&&console.warn("[pitch] someone stole a card... ",this.deck.length," cards in deck, ",e.length," cards from players and teams...",e),this._deck=new ge(this.factory)}resetState(){this.resetCards(),this._rounds=[],this._scoreboard=new fe(this.table.teams,this.calculator),this.showCards=!1}}class Ye extends Ve{async playPitch(e,t,s,a,r,o,_,w){let v;for(let b=e.nextRound(e.table.leader);!v;b=e.nextRound(e.table.leader)){e=await this.dealHands(e,w);let y=e.table.peekNextDealer();if(e=await this.takeBids(e,t,s,w),console.debug("[pitch] PitchDealer.playPitch (round.bid)",b.bid),!!b.bid){e.table.setNextLeader(b.bid.bidder);for(let p=b.nextTrick(e.table.leader);e.table.maxHandLength>0;p=b.nextTrick(e.table.leader))if(e=await this.takePlays(e,t,a,w),console.debug("[pitch] PitchDealer.playPitch (round.trump)",b.trump),b.trump){let g=p.getWinningPlay(b.trump);if(console.debug("[pitch] PitchDealer.playPitch (trick.getWinningPlay)",g),g)await r(e,g),e.table.setNextLeader(g.bidder);else throw new Error(E.STATE_500_NO_TRICK_WINNER)}else throw new Error(E.STATE_500_NO_TRUMP);e=await this.pushScores(e,o,w),e.table.setNextDealer(y),v=e.scoreboard.getWinner(e.options),console.debug("[pitch] PitchDealer.playPitch (state.scoreboard.getWinner)",v)}}return await _(e,v),e}async dealHands(e,t){e.resetCards(),e.deck.shuffle(void 0,e.options.shuffle);for(let s of[1,2])for(let a of e.table.iterator()){let r=e.deck.pop(),o=e.deck.pop(),_=e.deck.pop();if(r&&o&&_)a.takeDeal([r,o,_]),a.reorderHand(),await t(e);else throw new Error(se.DECK_500_EMPTY)}return e}async takeBids(e,t,s,a){var o;const r=e.rounds[e.rounds.length-1];for(let _ of e.table.iterator()){e.showCards=await t(e,_),await a(e);let w=await s(e,_),v=0;for(let b=this.validateBid(e,w);b;b=this.validateBid(e,w)){if(await a(e),v++>10)throw new Error(E.PLAY_400_TOO_MANY_ATTEMPTS);console.debug("[pitch] PitchDealer.takeBids (attempt, reason, bid)",v++,b,w),w=await s(e,_,b)}console.debug("[pitch] PitchDealer.takeBids (bid)",w),w.skip||(r.bid=w),console.debug("[pitch] PitchDealer.takeBids (round.bid)",r.bid),e.showCards=!1,await a(e)}return r.bid&&e.table.setNextLeader((o=r.bid)==null?void 0:o.bidder),e}async takePlays(e,t,s,a){var w;const r=e.rounds[e.rounds.length-1],o=r.tricks[r.tricks.length-1];for(let v of e.table.iterator()){e.showCards=await t(e,v),await a(e,"showing cards to bidder...");let b=await s(e,v),y=0;for(let g=this.validatePlay(e,{bidder:v,card:b});g;g=this.validatePlay(e,{bidder:v,card:b})){if(await a(e,"validation result... "+g),y++>10)throw new Error(E.PLAY_400_TOO_MANY_ATTEMPTS);console.debug("[pitch] PitchDealer.takePlays (attempt, reason, selectedCard)",y,g,b),b=await s(e,v,g)}console.debug("[pitch] PitchDealer.takePlays (selectedCard)",b);let p=v.play(b);if(console.debug("[pitch] PitchDealer.takePlays (playedCard)",p),await a(e,"card taken from bidder hand..."),!p)throw new Error(se.CARD_404);r.trump=(w=r.trump)!=null?w:p.suit,console.debug("[pitch] PitchDealer.takePlays (round.trump)",r.trump),o.waste.push({bidder:v,card:p}),e.showCards=!1,await a(e,"card placed in waste...")}if(!r.trump)throw new Error(E.STATE_500_NO_TRUMP);var _=o.getWinningPlay(r.trump);if(!_)throw new Error(E.TRICK_500_NO_WINNER);return _.bidder.team.cards.push(...o.waste.map(v=>v.card)),e.table.setNextLeader(_.bidder),await a(e,"trick completed with winner as next leader..."),e}async pushScores(e,t,s){const a=e.rounds[e.rounds.length-1];console.debug("[pitch] PitchDealer.pushScores (calculating)",a,e.table);let r=e.calculator.calculateRound(a,e.table);return console.debug("[pitch] PitchDealer.pushScores (calculation)",r),r&&(e.scoreboard.pushScores(r,e.options),await s(e),await t(e,r)),await s(e),e}validateBid(e,t){const s=e.rounds[e.rounds.length-1];if(t.skip){if(e.options.isBidNoneEnabled)return;if(Array.from(e.table.iterator())[e.table.length-1].compare(t.bidder)===0&&!s.bid)return E.BID_400_NO_BID}else{if(e.options.isBidFiveEnabled&&t.bid>5)return E.BID_400_EXCEED_5;if(t.bid>4)return E.BID_400_EXCEED_4;if(t.bid<2)return E.BID_400_LESS_THAN_2;if(s.bid&&t.bid<=s.bid.bid)return E.BID_400_NOT_EXCEED_BID}}validatePlay(e,t){const s=e.rounds[e.rounds.length-1],a=s.tricks[s.tricks.length-1];if(!t.bidder.hand.some(r=>r.compare(t.card)===0))return E.PLAY_400_NOT_IN_HAND;if(!(e.options.isAllowTrumpWhenCanFollowSuitEnabled&&s.trump&&t.card.suit.compare(s.trump)===0)&&a.leadSuit&&t.card.suit.compare(a.leadSuit)!==0&&t.bidder.hand.some(r=>r.suit.compare(a.leadSuit)===0))return E.PLAY_400_NOT_FOLLOWING_SUIT}async retry(e,t,s){return await t.catch(async a=>{if(e<=0)throw a;return s&&s(a),await this.retry(e-1,t)})}}class Ze{decideBid(e,t){var o,_;const a=(_=(o=t.rounds[t.rounds.length-1].bid)==null?void 0:o.bid)!=null?_:1;console.debug("[pitch] PitchAIBaby.decideBid",a,e);var r=this.decideWorthBySuit(e.hand,t.factory);return console.debug("[pitch] PitchAIBaby.decideBid",r),r.some(w=>w.worth>a)?(console.log("[pitch] PitchAIBaby.decideBid, AI is bidding",a+1),{bid:a+1,bidder:e,skip:!1}):t.table.last.compare(e)===0&&a<2&&!t.options.isBidNoneEnabled?(console.log("[pitch] PitchAIBaby.decideBid, AI is forced to bid..."),{bid:2,bidder:e,skip:!1}):(console.log("[pitch] PitchAIBaby.decideBid, AI is skipping..."),{bid:0,bidder:e,skip:!0})}decidePlay(e,t){var v,b;const s=t.rounds[t.rounds.length-1],a=s.tricks[s.tricks.length-1],r=[...e.hand];console.debug("[pitch] PitchAIBaby.decidePlay (bidder, hand)",e,r);const o=(v=s.trump)!=null?v:this.decideWorthBySuit(r,t.factory).sort(y=>-y.worth)[0].suit;console.debug("[pitch] PitchAIBaby.decidePlay (given trump, desired trump, lead suit)",s.trump,o,a.leadSuit);const _=(b=a.leadSuit)!=null?b:(s.trump,o),w=r.sort((y,p)=>-y.compareWeight(p,_,t.options.isAllowTrumpWhenCanFollowSuitEnabled?o:void 0));return console.debug("[pitch] PitchAIBaby.decidePlay (lead, sorted)",_,w),w[0]}decideWorthBySuit(e,t){const s=t.ten,a=t.jack,r=t.queen,o=t.king,_=t.ace;let w=e.map(p=>p.suit),v=me.groupBy(e,p=>p.rank.key),b=me.groupBy(e,p=>p.suit.key),y=me.groupBy(e,p=>p.rank.key+p.suit.key);return w.map(p=>{var Z,X,q,P,f,N,H,Q,oe,ue,k,T;var g=(X=(Z=b[p.key])==null?void 0:Z.length)!=null?X:0;(P=(q=v[s.key])==null?void 0:q.length)!=null;var S=(N=(f=y[a.key+p.key])==null?void 0:f.length)!=null?N:0,I=(Q=(H=y[r.key+p.key])==null?void 0:H.length)!=null?Q:0,V=(ue=(oe=y[o.key+p.key])==null?void 0:oe.length)!=null?ue:0,O=(T=(k=y[_.key+p.key])==null?void 0:k.length)!=null?T:0;return O>0&&V>0&&I>0&&g>5?{suit:p,worth:5}:S>0&&(V>0||O>0)&&g>3?{suit:p,worth:4}:(O>0||V>0||I>0)&&(S>0&&g>2||g>3)?{suit:p,worth:3}:(O>0||V>0)&&g>1||(O>0||V>0||I>0)&&g>2?{suit:p,worth:2}:{suit:p,worth:1}})}}class Xe{selectIntelligence(e){switch(e){case c.card.ARTIFICIAL:return new Ze;default:return}}}const qe=(l,e)=>e.filter((t,s)=>s<l).map(t=>new ke(t.name)),Je=(l,e,t)=>e.filter((s,a)=>a<l).map((s,a,r)=>{let o=t.length<1||r.length%t.length!==0?new ke(s.name):t[a%t.length];return new He(s.name,o,s.intelligence)}),_e=new Ae,ve=new $e(_e),Qe=[{name:"Player 1",intelligence:c.card.ARTIFICIAL},{name:"Player 2",intelligence:c.card.HUMAN},{name:"Player 3",intelligence:c.card.ARTIFICIAL},{name:"Player 4",intelligence:c.card.ARTIFICIAL},{name:"Player 5",intelligence:c.card.ARTIFICIAL},{name:"Player 6",intelligence:c.card.ARTIFICIAL},{name:"Player 7",intelligence:c.card.ARTIFICIAL},{name:"Player 8",intelligence:c.card.ARTIFICIAL}],et=[{name:"Team 1"},{name:"Team 2"},{name:"Team 3"},{name:"Team 4"}],re=Oe("pitch",{state:()=>({options:{...pe},deck:new ge(_e),table:new Pe([]),rounds:[],scoreboard:new fe([],ve),showCards:!1,teamConfigs:[...et],bidderConfigs:[...Qe],currentRound:void 0,currentTrick:void 0}),getters:{validIntelligences:()=>[c.card.HUMAN,c.card.ARTIFICIAL],validLocales:()=>[c.en_US,c.vn_VN],validWinningScores:()=>[11,21],validShuffleCounts:()=>[1,2,3,4,5,6,7,8,9],validCutCounts:()=>{const l=[];for(let e=1;e<52;e++)l.push(e);return l},validBidderCounts:()=>[2,3,4,5,6,7,8],validTeamCounts:l=>{let e=[0];return[2,4,6,8].includes(l.options.bidderCount)&&e.push(2),[3,6].includes(l.options.bidderCount)&&e.push(3),[4,8].includes(l.options.bidderCount)&&e.push(4),e},currentBidders:l=>Je(l.options.bidderCount,l.bidderConfigs,qe(l.options.teamCount,l.teamConfigs)),currentState:l=>new ze(l.table,l.options,_e,ve,l.deck,l.scoreboard,l.rounds,l.showCards),currentScore:l=>e=>l.scoreboard.getScoreTotal(e)},actions:{initializeState(){this.deck=new ge(_e),this.table=new Pe(this.currentBidders),this.rounds=[],this.scoreboard=new fe(this.table.teams,ve),this.showCards=!1,this.currentRound=void 0,this.currentTrick=void 0},setOptionVerbosity(l){this.options.verbose=l},setOptionWinningScore(l){if(!this.validWinningScores.includes(l))throw new Error(E.OPTIONS_400);this.options.winningScore=l},setOptionBidderCount(l){if(!this.validBidderCounts.includes(l))throw new Error(E.OPTIONS_400);this.options.bidderCount=l,this.validTeamCounts.includes(this.options.teamCount)||(this.options.teamCount=0),this.initializeState()},setOptionTeamCount(l){if(!this.validTeamCounts.includes(l))throw new Error(E.OPTIONS_400);this.options.teamCount=l,this.initializeState()},setTeamConfigName(l,e){if(e>=this.teamConfigs.length)throw new Error(E.STATE_404_TEAM);this.teamConfigs[e].name=l,this.initializeState()},setTeamConfigs(l){this.teamConfigs=l,this.initializeState()},setBidderConfigName(l,e){if(e>=this.bidderConfigs.length)throw new Error(E.STATE_404_BIDDER);this.bidderConfigs[e].name=l,this.initializeState()},setBidderConfigIntelligence(l,e){if(e>=this.bidderConfigs.length)throw new Error(E.STATE_404_BIDDER);this.bidderConfigs[e].intelligence=l,this.initializeState()},setBidderConfigs(l){this.bidderConfigs=l,this.initializeState()},setOptionBidFive(l){this.options.isBidFiveEnabled=l},setOptionBidNone(l){this.options.isBidNoneEnabled=l},setOptionAllowTrumpWhenCanFollowSuit(l){this.options.isAllowTrumpWhenCanFollowSuitEnabled=l},setOptionScoreTiedGamePionts(l){this.options.isScoreTiedGamePointsEnabled=l},setOptionShuffleCount(l){if(!this.validShuffleCounts.includes(l))throw new Error(E.OPTIONS_400);this.options.shuffle.shuffleCount=l},setOptionCutMin(l){if(!this.validCutCounts.includes(l))throw new Error(E.OPTIONS_400);this.options.cut.cutMinimum=l},setPitchState(l){this.table=l.table,this.options=l.options,this.deck=l.deck,this.scoreboard=l.scoreboard,this.rounds=l.rounds,this.showCards=l.showCards,this.currentRound=this.rounds[this.rounds.length-1],this.currentTrick=this.currentRound.tricks[this.currentRound.tricks.length-1]}}}),tt=n("div",{class:"modal-background"},null,-1),st={class:"modal-card"},it={class:"modal-card-head"},nt={class:"modal-card-title"},lt={class:"modal-card-body"},at={class:"modal-card-foot"},be=D({__name:"ModalCard",props:{active:{type:Boolean},titleKey:null,titleParams:null},emits:["close"],setup(l,{emit:e}){const t=l,{t:s}=Y({useScope:"global"}),a=$(()=>t.active?["modal","is-active"]:["modal"]);return(r,o)=>(h(),m("div",{class:le(i(a))},[tt,n("div",st,[n("header",it,[n("p",nt,u(l.titleParams?i(s)(l.titleKey,[...l.titleParams]):i(s)(l.titleKey)),1),n("button",{class:"delete","aria-label":"close",onClick:o[0]||(o[0]=_=>e("close"))})]),n("section",lt,[Ce(r.$slots,"default")]),n("footer",at,[Ce(r.$slots,"footer")])])],2))}}),he=D({__name:"ModalAlert",props:{messageKey:null,messageParams:null,titleKey:null,titleParams:null},setup(l){const{t:e}=Y({useScope:"global"}),t=K(!0);function s(){return!0}return(a,r)=>(h(),ie(be,{active:t.value,"title-key":l.titleKey,"title-params":l.titleParams,onClose:r[0]||(r[0]=o=>i(z)(s()))},{default:J(()=>[we(u(i(e)(l.messageKey,l.messageParams?l.messageParams:[])),1)]),_:1},8,["active","title-key","title-params"]))}}),rt={class:"level"},ot={class:"level-item"},ct={class:"level-item"},ut=D({__name:"ModalBooleanPrompt",props:{labelTrue:null,labelFalse:null,message:null,titleKey:null,titleParams:null},setup(l){const e=K(!0);return(t,s)=>(h(),ie(be,{active:e.value,"title-key":l.titleKey,"title-params":l.titleParams,onClose:s[2]||(s[2]=a=>i(z)(!1))},{default:J(()=>[we(u(l.message),1)]),footer:J(()=>[n("div",rt,[n("div",ot,[n("button",{id:"yes-no-prompt-yes",class:"button",onClick:s[0]||(s[0]=a=>i(z)(!0))},u(l.labelTrue),1)]),n("div",ct,[n("button",{id:"yes-no-prompt-no",class:"button",onClick:s[1]||(s[1]=a=>i(z)(!1))},u(l.labelFalse),1)])])]),_:1},8,["active","title-key","title-params"]))}}),dt={xmlns:"http://www.w3.org/2000/svg",style:{width:"24px",height:"24px"},viewBox:"0 0 24 24"},ht=["fill"],mt=["fill"],_t=["fill"],pt=["fill"],gt=["fill"],ft=D({__name:"IconSuitOutline",props:{suit:null,color:null},setup(l){const e=l,t=te(()=>e.color===ne.RED?"red":"black");return(s,a)=>(h(),m("svg",dt,[l.suit===i(F).CLUBS?(h(),m("path",{key:0,fill:i(t),d:"M16.6 9.5C16.8 8.9 17 8.2 17 7.5C17 4.5 14.8 2 12 2S7 4.5 7 7.5C7 8.2 7.1 8.9 7.4 9.5C4.9 9.6 3 11.4 3 13.8C3 16.3 5 18 7.5 18C7.5 18 10 18 11 17C11 17 11.3 19 9 22H15C12.7 19 13 17 13 17C14 18 16.5 18 16.5 18C19 18 21 16.3 21 13.8C21 11.4 19.1 9.6 16.6 9.5M16.5 16C16.5 16 14 16 13 15H11C10 16 7.5 16 7.5 16C6.3 16 5 15.3 5 13.8C5 12.5 6.1 11.5 7.5 11.5C7.8 11.5 8.3 11.6 8.8 11.7C8.9 11.7 9 11.8 9.1 11.8L10 10.1C9.8 9.9 9.7 9.7 9.6 9.5C9.2 8.9 9 8.3 9 7.5C9 5.6 10.3 4 12 4S15 5.6 15 7.5C15 8.3 14.8 9 14.4 9.6C14.3 9.8 14.2 9.9 14.1 10.1L15 11.8C15.1 11.8 15.2 11.7 15.3 11.7C15.7 11.6 16.2 11.5 16.6 11.5C18 11.5 19.1 12.5 19.1 13.8C19 15.3 17.7 16 16.5 16Z"},null,8,ht)):l.suit===i(F).DIAMONDS?(h(),m("path",{key:1,fill:l.color,d:"M12 2L5 12L12 22L19 12M7.44 12L12 5.5L16.56 12L12 18.5"},null,8,mt)):l.suit===i(F).HEARTS?(h(),m("path",{key:2,fill:l.color,d:"M12.1 18.55L12 18.65L11.89 18.55C7.14 14.24 4 11.39 4 8.5C4 6.5 5.5 5 7.5 5C9.04 5 10.54 6 11.07 7.36H12.93C13.46 6 14.96 5 16.5 5C18.5 5 20 6.5 20 8.5C20 11.39 16.86 14.24 12.1 18.55M16.5 3C14.76 3 13.09 3.81 12 5.08C10.91 3.81 9.24 3 7.5 3C4.42 3 2 5.41 2 8.5C2 12.27 5.4 15.36 10.55 20.03L12 21.35L13.45 20.03C18.6 15.36 22 12.27 22 8.5C22 5.41 19.58 3 16.5 3Z"},null,8,_t)):l.suit===i(F).SPADES?(h(),m("path",{key:3,fill:l.color,d:"M11 17C11 17 11.3 19 9 22H15C12.7 19 13 17 13 17S14 18 16 18 20 16 20 14C20 9 15 7 12 2C9 7 4 9 4 14C4 16 6 18 8 18S11 17 11 17M13 14H11C11 14 10 16 8 16C7.1 16 6 14.9 6 14C5.8 11 9.9 8.2 12 5.4C14.1 8.1 18.2 10.9 18 14C18 14.9 16.9 16 16 16C14 16 13 14 13 14Z"},null,8,pt)):(h(),m("path",{key:4,fill:l.color,d:"M11,18H13V16H11V18M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,6A4,4 0 0,0 8,10H10A2,2 0 0,1 12,8A2,2 0 0,1 14,10C14,12 11,11.75 11,15H13C13,12.75 16,12.5 16,10A4,4 0 0,0 12,6Z"},null,8,gt))]))}}),bt={id:"pitch-scoreboard",class:"columns"},vt={id:"pitch-scoreboard-game",class:"column"},Ct={id:"pitch-scoreboard-scores-table",class:"table"},wt={id:"pitch-scoreboard-round",class:"column"},kt={id:"pitch-scoreboard-round-table",class:"table"},yt=D({__name:"PitchScoreboard",setup(l){const{t:e}=Y({useScope:"global"}),{table:t,rounds:s,currentScore:a,currentRound:r}=ae(re());K(!0);const o=$(()=>{var v,b;return(b=(v=r.value)==null?void 0:v.trump)==null?void 0:b.key}),_=$(()=>{var v,b;return(b=(v=r.value)==null?void 0:v.trump)==null?void 0:b.colorKey}),w=$(()=>{var b;const v=(b=r.value)==null?void 0:b.bid;return v?`${v.bid} (${v.bidder.name})`:""});return(v,b)=>(h(),m("div",bt,[n("div",vt,[n("table",Ct,[n("thead",null,[n("tr",null,[n("th",null,u(i(e)(i(c).label_team)),1),(h(!0),m(B,null,A(i(t).teams,y=>(h(),m("td",null,u(y.name),1))),256))])]),n("tfoot",null,[n("tr",null,[n("th",null,u(i(e)(i(c).label_total)),1),(h(!0),m(B,null,A(i(t).teams,y=>(h(),m("td",null,u(i(a)(y)),1))),256))])])])]),n("div",wt,[n("table",kt,[n("thead",null,[n("tr",null,[n("th",null,u(i(e)(i(c).label_trump)),1),n("th",null,u(i(e)(i(c).label_bid)),1),n("th",null,u(i(e)(i(c).label_round)),1)])]),n("tbody",null,[n("tr",null,[n("td",null,[i(o)&&i(_)?(h(),ie(ft,{key:0,suit:i(o),color:i(_)},null,8,["suit","color"])):ce("",!0)]),n("td",null,u(i(w)),1),n("td",null,u(i(s).length),1)])])])])]))}}),Tt={xmlns:"http://www.w3.org/2000/svg",style:{width:"24px",height:"24px"},viewBox:"0 0 24 24"},Pt=["fill"],St=["fill"],Et=["fill"],Bt=["fill"],At=["fill"],Se=D({__name:"IconSuitSolid",props:{suit:null,color:null},setup(l){const e=l,t=te(()=>e.color===ne.RED?"red":"black");return(s,a)=>(h(),m("svg",Tt,[l.suit===i(F).CLUBS?(h(),m("path",{key:0,fill:i(t),d:"M12,2C14.3,2 16.3,4 16.3,6.2C16.21,8.77 14.34,9.83 14.04,10C15.04,9.5 16.5,9.5 16.5,9.5C19,9.5 21,11.3 21,13.8C21,16.3 19,18 16.5,18C16.5,18 15,18 13,17C13,17 12.7,19 15,22H9C11.3,19 11,17 11,17C9,18 7.5,18 7.5,18C5,18 3,16.3 3,13.8C3,11.3 5,9.5 7.5,9.5C7.5,9.5 8.96,9.5 9.96,10C9.66,9.83 7.79,8.77 7.7,6.2C7.7,4 9.7,2 12,2Z"},null,8,Pt)):l.suit===i(F).DIAMONDS?(h(),m("path",{key:1,fill:i(t),d:"M19,12L12,22L5,12L12,2"},null,8,St)):l.suit===i(F).HEARTS?(h(),m("path",{key:2,fill:i(t),d:"M12,21.35L10.55,20.03C5.4,15.36 2,12.27 2,8.5C2,5.41 4.42,3 7.5,3C9.24,3 10.91,3.81 12,5.08C13.09,3.81 14.76,3 16.5,3C19.58,3 22,5.41 22,8.5C22,12.27 18.6,15.36 13.45,20.03L12,21.35Z"},null,8,Et)):l.suit===i(F).SPADES?(h(),m("path",{key:3,fill:i(t),d:"M12,2C9,7 4,9 4,14C4,16 6,18 8,18C9,18 10,18 11,17C11,17 11.32,19 9,22H15C13,19 13,17 13,17C14,18 15,18 16,18C18,18 20,16 20,14C20,9 15,7 12,2Z"},null,8,Bt)):(h(),m("path",{key:4,fill:l.color,d:"M15.07,11.25L14.17,12.17C13.45,12.89 13,13.5 13,15H11V14.5C11,13.39 11.45,12.39 12.17,11.67L13.41,10.41C13.78,10.05 14,9.55 14,9C14,7.89 13.1,7 12,7A2,2 0 0,0 10,9H8A4,4 0 0,1 12,5A4,4 0 0,1 16,9C16,9.88 15.64,10.67 15.07,11.25M13,19H11V17H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12C22,6.47 17.5,2 12,2Z"},null,8,At))]))}}),$t={key:0,class:"playing-card-face is-nw"},It={key:1,class:"playing-card-face is-ne"},xt={key:2,class:"playing-card-face is-sw"},Dt={key:3,class:"playing-card-face is-se"},Nt=D({__name:"PitchCard",props:{card:null,show:{type:Boolean}},setup(l){function e(t){switch(t.rank.key){case x.ACE:return"A";case x.KING:return"K";case x.QUEEN:return"Q";case x.JACK:return"J";default:return t.rank.value.toString()}}return(t,s)=>(h(),m("div",{id:"pitch-card",class:le(["card","box","is-hoverable","playing-card",l.show?"face-up":"face-down"])},[l.show?(h(),m("span",$t,u(e(l.card)),1)):ce("",!0),l.show?(h(),m("span",It,[j(Se,{suit:l.card.suit.key,color:l.card.suit.colorKey},null,8,["suit","color"])])):ce("",!0),l.show?(h(),m("span",xt,[j(Se,{suit:l.card.suit.key,color:l.card.suit.colorKey},null,8,["suit","color"])])):ce("",!0),l.show?(h(),m("span",Dt,u(e(l.card)),1)):ce("",!0)],2))}});const Ie=Re(Nt,[["__scopeId","data-v-0f3f3e2b"]]),Lt={id:"pitch-trick",class:"columns is-multiline is-centered is-mobile"},Mt={class:"column is-narrow"},Ot={key:0,class:"tags"},Rt={class:"tag is-primary"},Gt={key:1,class:"tags has-addons"},Ft={class:"tag is-primary"},Kt={class:"tag is-light"},Vt=D({__name:"PitchTrick",setup(l){const{currentTrick:e}=ae(re());return(t,s)=>{var a,r;return h(),m("div",Lt,[(h(!0),m(B,null,A((r=(a=i(e))==null?void 0:a.waste)!=null?r:[],o=>(h(),m("div",Mt,[j(Ie,{card:o.card,show:!0},null,8,["card"]),o.bidder.name===o.bidder.team.name?(h(),m("div",Ot,[n("span",Rt,u(o.bidder.name),1)])):(h(),m("div",Gt,[n("span",Ft,u(o.bidder.name),1),n("span",Kt,u(o.bidder.team.name),1)]))]))),256))])}}}),Wt={class:"level is-mobile",id:"pitch-messages"},Ht=D({__name:"PitchFooter",emits:["play","config","exit"],setup(l,{emit:e}){const{t}=Y({useScope:"global"});return(s,a)=>(h(),m("div",Wt,[n("button",{class:"level-item button",onClick:a[0]||(a[0]=r=>e("play"))},u(i(t)(i(c).label_play)),1),n("button",{class:"level-item button",onClick:a[1]||(a[1]=r=>e("config"))},u(i(t)(i(c).label_configure)),1),n("button",{class:"level-item button",onClick:a[2]||(a[2]=r=>e("exit"))},u(i(t)(i(c).label_exit)),1)]))}}),Ut={class:"container"},jt={class:"content"},zt=n("div",{class:"block"},null,-1),Yt={id:"pitch-hand-cards",class:"content"},Zt={class:"columns is-multiline is-centered is-mobile"},Xt={class:"column is-narrow"},qt=n("div",{class:"block"},null,-1),xe=D({__name:"PitchHandWrapper",props:{bidder:null},emits:["selectCardIndex"],setup(l,{emit:e}){Y({useScope:"global"});const{showCards:t}=ae(re());return(s,a)=>(h(),m("div",Ut,[n("div",jt,[Ce(s.$slots,"default")]),zt,n("div",Yt,[n("div",Zt,[(h(!0),m(B,null,A(l.bidder.hand,(r,o)=>(h(),m("div",Xt,[j(Ie,{card:r,show:i(t),onClick:_=>e("selectCardIndex",r,o,...l.bidder.hand)},null,8,["card","show","onClick"])]))),256)),qt])])]))}}),Jt={class:"container"},Qt={id:"pitch-bid-bid",class:"content"},es={class:"select"},ts=["disabled","selected","value"],ss={id:"pitch-bid-submit",class:"content level is-mobile"},is=["disabled"],ns=D({__name:"PitchBidPrompt",props:{bidder:null},setup(l){const e=l,{t}=Y({useScope:"global"}),{currentState:s,currentRound:a,currentTrick:r}=ae(re()),o=K(0),_=K(!0),w=$(()=>{var g;return s.value.options.isBidNoneEnabled||((g=a.value)==null?void 0:g.bid)||s.value.table.last.compare(e.bidder)!==0}),v=$(()=>{var S;const g=(S=a.value)==null?void 0:S.bid;return[{bid:2,enabled:!g||g.bid<2},{bid:3,enabled:!g||g.bid<3},{bid:4,enabled:!g||g.bid<4},{bid:5,enabled:s.value.options.isBidFiveEnabled&&(!g||g.bid<5)}]});function b(){return _.value=!1,{bidder:e.bidder,bid:o.value,skip:!1}}function y(){_.value=!1,z(b())}function p(){_.value=!1,z({bidder:e.bidder,bid:0,skip:!0})}return(g,S)=>(h(),ie(xe,{bidder:l.bidder},{default:J(()=>[n("div",Jt,[n("section",Qt,[we(u(i(t)(i(c).message_bid_for,[l.bidder.name]))+" ",1),n("div",es,[R(n("select",{"onUpdate:modelValue":S[0]||(S[0]=I=>o.value=I)},[(h(!0),m(B,null,A(i(v),I=>(h(),m("option",{disabled:!I.enabled,selected:I.bid===o.value,value:I.bid},u(I.bid),9,ts))),256))],512),[[G,o.value]])])]),n("section",ss,[n("button",{class:"level-item button is-success",onClick:S[1]||(S[1]=I=>y())},u(i(t)(i(c).label_bid_submit)),1),n("button",{class:"level-item button",disabled:!i(w),onClick:S[2]||(S[2]=I=>p())},u(i(t)(i(c).label_bid_skip)),9,is)])])]),footer:J(()=>[]),_:1},8,["bidder"]))}}),ls={class:"level"},as=n("div",{class:"block"},null,-1),rs=D({__name:"PitchHandPrompt",props:{bidder:null},setup(l){const{t:e}=Y({useScope:"global"}),t=K(0);K(!0);function s(a,r){t.value=r,z(a)}return(a,r)=>(h(),ie(xe,{bidder:l.bidder,onSelectCardIndex:s},{default:J(()=>[n("div",ls,[n("p",null,u(i(e)(i(c).message_play_for,[l.bidder.name])),1)]),as]),_:1},8,["bidder"]))}}),os={class:"subtitle"},cs={class:"column"},us=["value","onChange"],ds={class:"column is-one-fourth"},hs={class:"select is-small"},ms=["onUpdate:modelValue","on:update:modelValue"],_s=["selected","value"],ps={class:"subtitle"},gs=["value","onChange"],fs={id:"state-options",class:"section box"},bs={class:"subtitle"},vs={class:"tile is-parent is-12"},Cs={class:"tile is-child is-6"},ws={class:"tile is-child container"},ks={class:"select is-small"},ys=["selected","value"],Ts={class:"tile is-parent is-12"},Ps={class:"tile is-child is-6"},Ss={class:"tile is-child container"},Es={class:"select is-small"},Bs=["selected","value"],As={class:"tile is-parent is-12"},$s={class:"tile is-child is-6"},Is={class:"tile is-child container"},xs={class:"select is-small"},Ds=["selected","value"],Ns={class:"tile is-parent is-12"},Ls={class:"tile is-child is-6"},Ms={class:"tile is-child container"},Os={class:"select is-small"},Rs=["selected","value"],Gs={class:"tile is-parent is-12"},Fs={class:"tile is-child is-6"},Ks={class:"tile is-child container"},Vs={class:"select is-small"},Ws=["selected","value"],Hs={class:"tile is-parent is-12"},Us={class:"tile is-child is-6"},js={class:"tile is-child container"},zs={class:"select is-small"},Ys=["selected","value"],Zs={class:"tile is-parent is-12"},Xs={class:"tile is-child is-6"},qs={class:"tile is-child container"},Js={class:"select is-small"},Qs=["selected","value"],ei={class:"tile is-parent is-12"},ti={class:"tile is-child is-6"},si={class:"tile is-child"},ii={class:"select is-small"},ni=["selected","value"],li={class:"tile is-parent is-12"},ai={class:"tile is-child is-6"},ri={class:"tile is-child container"},oi={class:"select is-small"},ci=["selected","value"],ui={class:"tile is-parent is-12"},di={class:"tile is-child is-6"},hi={class:"tile is-child container"},mi={class:"select is-small"},_i=["selected","value"],pi=D({__name:"PitchConfigPrompt",setup(l){const{t:e}=Y({useScope:"global"}),t=re(),{currentState:s,validBidderCounts:a,validTeamCounts:r,validShuffleCounts:o,validCutCounts:_,validIntelligences:w,validLocales:v,validWinningScores:b}=ae(t);K(!0);const y=$({get(){return s.value.options.verbose},set(k){t.setOptionVerbosity(k)}}),p=$({get(){return s.value.options.winningScore},set(k){t.setOptionWinningScore(k)}}),g=$({get(){return s.value.options.bidderCount},set(k){t.setOptionBidderCount(k)}}),S=$({get(){return s.value.options.teamCount},set(k){t.setOptionTeamCount(k)}}),I=$({get(){return t.teamConfigs},set(k){t.setTeamConfigs(k)}}),V=$({get(){return t.bidderConfigs},set(k){t.setBidderConfigs(k)}}),O=$({get(){return s.value.options.isBidFiveEnabled},set(k){t.setOptionBidFive(k)}}),Z=$({get(){return s.value.options.isBidNoneEnabled},set(k){t.setOptionBidNone(k)}}),X=$({get(){return s.value.options.isAllowTrumpWhenCanFollowSuitEnabled},set(k){t.setOptionAllowTrumpWhenCanFollowSuit(k)}}),q=$({get(){return s.value.options.isScoreTiedGamePointsEnabled},set(k){t.setOptionScoreTiedGamePionts(k)}}),P=$({get(){return s.value.options.shuffle.shuffleCount},set(k){t.setOptionShuffleCount(k)}}),f=$({get(){return s.value.options.cut.cutMinimum},set(k){t.setOptionCutMin(k)}});function N(k,T){k<I.value.length&&t.setTeamConfigName(T,k)}function H(k,T){k<V.value.length&&t.setBidderConfigName(T,k)}function Q(k,T){k<V.value.length&&t.setBidderConfigIntelligence(T,k)}function oe(){z(ue())}function ue(){return!0}return(k,T)=>(h(),ie(be,{"title-key":i(c).pitch.title_configuration,active:!0,onClose:oe},{default:J(()=>[n("section",{id:"state-table-bidders",class:le(i(g)>0?"section box":"is-hidden")},[n("h3",os,u(i(e)(i(c).pitch.subtitle_configuration_bidders)),1),(h(!0),m(B,null,A(i(V).filter((d,ee)=>ee<i(g)),(d,ee)=>(h(),m("div",{class:"columns is-mobile",key:d.name},[n("div",cs,[n("input",{class:"input is-small",id:"state-table-bidder-name",type:"text",value:d.name,onChange:L=>H(ee,L.target.value)},null,40,us)]),n("div",ds,[n("div",hs,[R(n("select",{id:"state-table-bidder-intelligence","onUpdate:modelValue":L=>d.intelligence=L,"on:update:modelValue":L=>Q(ee,L)},[(h(!0),m(B,null,A(i(w),L=>(h(),m("option",{selected:L===d.intelligence,value:L},u(i(e)(L)),9,_s))),256))],40,ms),[[G,d.intelligence]])])])]))),128))],2),n("section",{id:"state-table-teams",class:le(i(S)>0?"section box":"is-hidden")},[n("h3",ps,u(i(e)(i(c).pitch.subtitle_configuration_teams)),1),(h(!0),m(B,null,A(i(I).filter((d,ee)=>ee<i(S)),(d,ee)=>(h(),m("div",{class:"columns",key:d.name},[n("input",{class:"input is-small",id:"state-table-team-name",type:"text",value:d.name,onChange:L=>{var ye;return N(ee,(ye=L==null?void 0:L.target)==null?void 0:ye.value)}},null,40,gs)]))),128))],2),n("section",fs,[n("h3",bs,u(i(e)(i(c).pitch.subtitle_configuration_options)),1),n("div",vs,[n("div",Cs,[n("label",null,u(i(e)(i(c).label_option_verbose)),1)]),n("div",ws,[n("div",ks,[R(n("select",{id:"state-options-verbose","onUpdate:modelValue":T[0]||(T[0]=d=>U(y)?y.value=d:null)},[(h(),m(B,null,A([!0,!1],d=>n("option",{selected:d===i(y),value:d},u(i(e)(d?i(c).label_enabled:i(c).label_disabled)),9,ys)),64))],512),[[G,i(y)]])])])]),n("div",Ts,[n("div",Ps,[n("label",null,u(i(e)(i(c).label_option_winning_score)),1)]),n("div",Ss,[n("div",Es,[R(n("select",{id:"state-options-winning-score","onUpdate:modelValue":T[1]||(T[1]=d=>U(p)?p.value=d:null)},[(h(!0),m(B,null,A(i(b),d=>(h(),m("option",{selected:d===i(p),value:d},u(d),9,Bs))),256))],512),[[G,i(p)]])])])]),n("div",As,[n("div",$s,[n("label",null,u(i(e)(i(c).label_option_player_count)),1)]),n("div",Is,[n("div",xs,[R(n("select",{id:"state-options-bidder-count","onUpdate:modelValue":T[2]||(T[2]=d=>U(g)?g.value=d:null)},[(h(!0),m(B,null,A(i(a),d=>(h(),m("option",{selected:d===i(g),value:d},u(d),9,Ds))),256))],512),[[G,i(g)]])])])]),n("div",Ns,[n("div",Ls,[n("label",null,u(i(e)(i(c).label_option_team_count)),1)]),n("div",Ms,[n("div",Os,[R(n("select",{id:"state-options-team-count","onUpdate:modelValue":T[3]||(T[3]=d=>U(S)?S.value=d:null)},[(h(!0),m(B,null,A(i(r),d=>(h(),m("option",{selected:d===i(S),value:d},u(d),9,Rs))),256))],512),[[G,i(S)]])])])]),n("div",Gs,[n("div",Fs,[n("label",null,u(i(e)(i(c).label_option_bid_5)),1)]),n("div",Ks,[n("div",Vs,[R(n("select",{id:"state-options-enable-bid5","onUpdate:modelValue":T[4]||(T[4]=d=>U(O)?O.value=d:null)},[(h(),m(B,null,A([!0,!1],d=>n("option",{selected:d===i(O),value:d},u(i(e)(d?i(c).label_enabled:i(c).label_disabled)),9,Ws)),64))],512),[[G,i(O)]])])])]),n("div",Hs,[n("div",Us,[n("label",null,u(i(e)(i(c).label_option_bid_all_skip)),1)]),n("div",js,[n("div",zs,[R(n("select",{id:"state-options-enable-bid-all-skip","onUpdate:modelValue":T[5]||(T[5]=d=>U(Z)?Z.value=d:null)},[(h(),m(B,null,A([!0,!1],d=>n("option",{selected:d===i(Z),value:d},u(i(e)(d?i(c).label_enabled:i(c).label_disabled)),9,Ys)),64))],512),[[G,i(Z)]])])])]),n("div",Zs,[n("div",Xs,[n("label",null,u(i(e)(i(c).label_option_play_trump_despite_lead)),1)]),n("div",qs,[n("div",Js,[R(n("select",{id:"state-options-enable-trump-over-lead","onUpdate:modelValue":T[6]||(T[6]=d=>U(X)?X.value=d:null)},[(h(),m(B,null,A([!0,!1],d=>n("option",{selected:d===i(X),value:d},u(i(e)(d?i(c).label_enabled:i(c).label_disabled)),9,Qs)),64))],512),[[G,i(X)]])])])]),n("div",ei,[n("div",ti,[n("label",null,u(i(e)(i(c).label_option_score_tied_game)),1)]),n("div",si,[n("div",ii,[R(n("select",{id:"state-options-enable-score-tied-game","onUpdate:modelValue":T[7]||(T[7]=d=>U(q)?q.value=d:null)},[(h(),m(B,null,A([!0,!1],d=>n("option",{selected:d===i(q),value:d},u(i(e)(d?i(c).label_enabled:i(c).label_disabled)),9,ni)),64))],512),[[G,i(q)]])])])]),n("div",li,[n("div",ai,[n("label",null,u(i(e)(i(c).label_option_shuffle_count)),1)]),n("div",ri,[n("div",oi,[R(n("select",{id:"state-options-shuffle-count","onUpdate:modelValue":T[8]||(T[8]=d=>U(P)?P.value=d:null)},[(h(!0),m(B,null,A(i(o),d=>(h(),m("option",{selected:d===i(P),value:d},u(d),9,ci))),256))],512),[[G,i(P)]])])])]),n("div",ui,[n("div",di,[n("label",null,u(i(e)(i(c).label_option_cut_count_min)),1)]),n("div",hi,[n("div",mi,[R(n("select",{id:"state-options-cut-min","onUpdate:modelValue":T[9]||(T[9]=d=>U(f)?f.value=d:null)},[(h(!0),m(B,null,A(i(_),d=>(h(),m("option",{selected:d===i(f),value:d},u(d),9,_i))),256))],512),[[G,i(f)]])])])])])]),footer:J(()=>[n("button",{class:"button",type:"submit",onClick:oe},u(i(e)(i(c).label_exit_configuration)),1)]),_:1},8,["title-key"]))}}),gi={class:"table"},fi=n("th",null,null,-1),bi={class:"table"},vi=n("th",null,null,-1),Ci=D({__name:"PitchRoundAlert",props:{calculator:null,calculation:null,options:null},setup(l){const e=l,{t}=Y({useScope:"global"}),s=K(!0),a=te(()=>e.calculation.greatestBid?{team:e.calculation.greatestBid.team.name,value:e.calculation.greatestBid.value.toString()}:{team:t(c.field_none),value:t(c.field_none)}),r=te(()=>e.calculation.highestTrump?{team:e.calculation.highestTrump.team.name,value:b(e.calculation.highestTrump.value)}:{team:t(c.field_none),value:t(c.field_none)}),o=te(()=>e.calculation.lowestTrump?{team:e.calculation.lowestTrump.team.name,value:b(e.calculation.lowestTrump.value)}:{team:t(c.field_none),value:t(c.field_none)}),_=te(()=>e.calculation.jackiestTrump?{team:e.calculation.jackiestTrump.team.name,value:b(e.calculation.jackiestTrump.value)}:{team:t(c.field_none),value:t(c.field_none)}),w=te(()=>{if(e.calculation.greatestGame){let p="";return e.calculation.greatestGame.teams.forEach(g=>p+=g.name+"|"),{team:p.substring(0,p.length-2),value:e.calculation.greatestGame.value}}else return{team:t(c.field_none),value:t(c.field_none)}}),v=te(()=>{let p=[];return e.calculation.greatestGame&&e.calculation.greatestGame.teams.forEach(g=>p.push(g)),e.calculation.greatestBid&&!p.some(g=>g.compare(e.calculation.greatestBid.team)===0)&&p.push(e.calculation.greatestBid.team),e.calculation.highestTrump&&!p.some(g=>g.compare(e.calculation.highestTrump.team)===0)&&p.push(e.calculation.highestTrump.team),e.calculation.lowestTrump&&!p.some(g=>g.compare(e.calculation.lowestTrump.team)===0)&&p.push(e.calculation.lowestTrump.team),e.calculation.jackiestTrump&&!p.some(g=>g.compare(e.calculation.jackiestTrump.team)===0)&&p.push(e.calculation.jackiestTrump.team),p});function b(p){return t(p.rank.key)+" "+t(p.suit.key)}function y(){return s.value=!1,!0}return(p,g)=>(h(),ie(be,{"title-key":i(c).title_round_over,active:s.value,onClose:g[0]||(g[0]=S=>i(z)(y()))},{default:J(()=>[n("table",gi,[n("thead",null,[n("tr",null,[fi,n("th",null,u(i(t)(i(c).label_bid)),1),n("th",null,u(i(t)(i(c).label_high)),1),n("th",null,u(i(t)(i(c).label_low)),1),n("th",null,u(i(t)(i(c).label_jack)),1),n("th",null,u(i(t)(i(c).label_game)),1)])]),n("tbody",null,[n("tr",null,[n("th",null,u(i(t)(i(c).label_value)),1),n("td",null,u(i(a).value),1),n("td",null,u(i(r).value),1),n("td",null,u(i(o).value),1),n("td",null,u(i(_).value),1),n("td",null,u(i(w).value),1)]),n("tr",null,[n("th",null,u(i(t)(i(c).label_team)),1),n("td",null,u(i(a).team),1),n("td",null,u(i(r).team),1),n("td",null,u(i(o).team),1),n("td",null,u(i(_).team),1),n("td",null,u(i(w).team),1)])])]),n("table",bi,[n("thead",null,[n("tr",null,[vi,(h(!0),m(B,null,A(i(v),S=>(h(),m("th",null,u(S.name),1))),256))])]),n("tbody",null,[n("tr",null,[n("th",null,u(i(t)(i(c).label_netscore)),1),(h(!0),m(B,null,A(i(v),S=>(h(),m("td",null,u(l.calculator.net(l.calculator.score(S,l.calculation,l.options))),1))),256))])])])]),_:1},8,["title-key","active"]))}}),wi={class:"container"},ki={class:"content level"},Ee=D({__name:"PitchAlert",props:{closeKey:null,messageKey:null,messageParams:null,messageClasses:null},setup(l){const{t:e}=Y({useScope:"global"});function t(){return!0}return(s,a)=>{var r;return h(),m("div",wi,[n("div",ki,[n("p",{class:le(["level-item"].concat(...(r=l.messageClasses)!=null?r:[]))},u(l.messageParams?i(e)(l.messageKey,l.messageParams):i(e)(l.messageKey)),3),n("button",{class:"level-item button",onClick:a[0]||(a[0]=o=>i(z)(t()))},u(i(e)(l.closeKey)),1)])])}}});const yi={id:"pitch-game",class:"container"},Ti={id:"pitch-game-scoreboard",class:"section box"},Pi={id:"pitch-game-trick",class:"section box"},Si={id:"pitch-game-messages",class:""},Ei=D({__name:"PitchGame",setup(l){const e=Fe(),t=re(),{currentState:s}=ae(t),a=K([]),r=new Xe,o=K(!1);function _(P){console.error(P),a.value.unshift(...P.map(f=>({text:f,classes:["has-text-danger-dark"]})))}function w(P){console.log(P),a.value.unshift(...P.map(f=>({text:f,classes:["has-text-success-dark"]})))}function v(){a.value=[]}async function b(){await W(pi,{})}async function y(){const P=new Ye;try{t.initializeState(),await P.playPitch(s.value,S,Z,X,I,V,O,q),await p()}catch(f){console.error(f),f&&f.message&&(await W(he,{titleKey:c.title_error,messageKey:c.message_error_of,messageParams:[f.message]}),_([f.message]))}}async function p(){await W(ut,{titleKey:"Game Over",message:"Would you like to play again",labelTrue:"Yes",labelFalse:"No"})?await y():await g()}async function g(){e.push("/")}async function S(P,f){return r.selectIntelligence(f.intelligence)?!0:await W(he,{titleKey:c.title_turn_for,titleParams:[f.name],messageKey:c.message_turn_for,messageParams:[f.name]})}async function I(P,f){console.debug("[components.pitch] PitchGame.alertOfTrickResult",f),await W(Ee,{closeKey:c.label_continue,messageKey:c.message_trick_winner_for,messageParams:[f.bidder.name]},"pitch-notice")}async function V(P,f){console.debug("[components.pitch] PitchGame.alertOfRoundResult",f),await W(Ci,{calculator:P.calculator,calculation:f,options:P.options},"pitch-notice")}async function O(P,f){console.debug("[components.pitch] PitchGame.alertOfGameResult",f),await W(Ee,{closeKey:c.label_continue,messageKey:c.message_winner_for,messageParams:[f.name]},"pitch-notice")}async function Z(P,f,N){let H=r.selectIntelligence(f.intelligence);if(H)return H.decideBid(f,P);{N&&await W(he,{titleKey:`${f.name}: Invalid Bid`,messageKey:N}),o.value=!0;const Q=await W(ns,{bidder:f},"pitch-hand");return o.value=!1,Q}}async function X(P,f,N){let H=r.selectIntelligence(f.intelligence);return H?H.decidePlay(f,P):(N&&await W(he,{titleKey:`${f.name}: Invalid Play`,messageKey:N}),o.value=!0,await W(rs,{bidder:f},"pitch-hand").then(Q=>(o.value=!1,Q)))}async function q(P,f){f&&w([f]),t.setPitchState(P)}return Ge(()=>b()),(P,f)=>(h(),m("div",yi,[n("header",Ti,[j(yt)]),n("section",Pi,[j(Vt),j(i(Te),{name:"pitch-notice","transition-attrs":{name:"pitch-hand"}})]),n("section",{id:"pitch-game-move",class:le(o.value?["section","box"]:["hidden"])},[j(i(Te),{name:"pitch-hand","transition-attrs":{name:"pitch-hand"}})],2),n("footer",Si,[j(Ht,{messages:a.value,onPlay:f[0]||(f[0]=N=>y()),onClear:f[1]||(f[1]=N=>v()),onConfig:f[2]||(f[2]=N=>b()),onExit:f[3]||(f[3]=N=>g())},null,8,["messages"])])]))}}),Bi={class:"pitch"},Ii=D({__name:"PitchView",setup(l){const e=K(!0);return(t,s)=>(h(),m("div",Bi,[j(Ei,{modelValue:e.value,"onUpdate:modelValue":s[0]||(s[0]=a=>e.value=a)},null,8,["modelValue"])]))}});export{Ii as default};
