var Ae=Object.defineProperty;var Ie=(i,e,t)=>e in i?Ae(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var k=(i,e,t)=>(Ie(i,typeof e!="symbol"?e+"":e,t),t);import{m as o,P as ne,b as ve,e as N,C as x,f as ee,g as L,h as De,l as Ce,d as A,i as T,o as h,c as _,a as n,t as u,r as _e,n as te,u as l,j as F,k as Y,w as X,p as ge,q as z,s as se,F as E,v as B,x as le,y as j,_ as Ne,z as H,A as U,B as q,D as Le,E as Me,G as V,H as we,I as Oe}from"./index.dfcb5d69.js";const Re={cutMinimum:1},Pe={cardCount:1,isDealerFirst:!1},xe={shuffleCount:1};class Fe{constructor(e){k(this,"_stack");this._stack=[],e.cards.forEach(t=>this._stack.push(t))}get length(){return this._stack.length}pop(e){return e?this._stack.splice(this.length-(e>0?e:1)):this._stack.pop()}push(...e){this._stack.push(...e)}cut(e,t){if(t||(t=Re),t.cutMinimum>this._stack.length)throw new Error(o.card.errors.TABLE_400_CUT);if(!e){const r=Math.min(t.cutMinimum,this._stack.length-t.cutMinimum),c=Math.max(t.cutMinimum,this._stack.length-t.cutMinimum);e=Math.floor(Math.random()*(c-r)+r)}if(e<t.cutMinimum||e>this._stack.length-t.cutMinimum)throw new Error(o.card.errors.TABLE_400_CUT);const s=this._stack.slice(0,e),a=this._stack.slice(e);this._stack=a.concat(s)}shuffle(e,t){e||(e=[]),t||(t=xe);let s=this._stack.concat(e);for(let a=0;a<t.shuffleCount;a++){const r=s.slice(0,s.length/2),c=s.slice(s.length/2);for(s=[];r.length>0||c.length>0;){const g=r.length>0&&Math.random()<.5?r.pop():c.pop();g&&s.push(g)}}this._stack=s}}class Ge{deal(e,t){t||(t=Pe);const s=[];for(let a=0;a<t.cardCount;a++){const r=e.pop();r&&s.push(r)}return console.debug("[card] GenericDealer.deal",s),s}}class Ve{constructor(e,t){k(this,"_options");k(this,"_seats");k(this,"_currentDealer");this._options=t!=null?t:Pe,this._seats=[...e],this._currentDealer=0}get length(){return this._seats.length}get dealer(){return this._seats[this._currentDealer]}get leader(){return this._seats[this._currentLeader]}get last(){return this._seats[this.fix(this._currentLeader-1)]}peekNextDealer(){return this._seats[this.fix(this._currentDealer+1)]}peekNextLeader(){return this._seats[this.fix(this._currentLeader+1)]}setNext(){console.debug("[card] GenericTable.setNext (pre)",this._currentDealer,this._currentLeader);const e=this.peekNextLeader();return this._currentDealer=this.fix(this._currentDealer+1),console.debug("[card] GenericTable.setNext (post)",this._currentDealer,this._currentLeader),e}setNextDealer(e){console.debug("[card] GenericTable.setNextDealer (pre)",this._currentDealer,this._currentLeader);const t=this._seats.findIndex(s=>s.compare(e)===0);if(t<0)throw new Error(o.card.errors.TABLE_404_NEXT);this._currentDealer=t,console.debug("[card] GenericTable.setNextDealer (post)",this._currentDealer,this._currentLeader)}setNextLeader(e){console.debug("[card] GenericTable.setNextLeader (pre)",this._currentDealer,this._currentLeader);const t=this._seats.findIndex(s=>s.compare(e)===0);if(t<0)throw new Error(o.card.errors.TABLE_404_NEXT);this._currentDealer=this.fix(t-1),console.debug("[card] GenericTable.setNextLeader (post)",this._currentDealer,this._currentLeader)}*iterator(){for(let e=this._currentLeader;e<this._seats.length;e++)yield this._seats[e];for(let e=0;e<this._currentLeader;e++)yield this._seats[e]}get _currentLeader(){return this._options.isDealerFirst?this._currentDealer:this.fix(this._currentDealer+1)}fix(e){const t=this.length;return(e%t+t)%t}}const ue={verbose:!1,winningScore:11,bidderCount:2,teamCount:0,isBidFiveEnabled:!1,isBidNoneEnabled:!1,isAllowTrumpWhenCanFollowSuitEnabled:!1,isScoreTiedGamePointsEnabled:!0,shuffle:{shuffleCount:5},deal:{isDealerFirst:!1,cardCount:3},cut:{cutMinimum:1}};class oe{constructor(e,t){k(this,"rank");k(this,"suit");this.suit=t,this.rank=e}compare(e){return this.suit.compare(e.suit)===0?this.rank.compare(e.rank):this.suit.compare(e.suit)}compareWeight(e,t,s){return this.suit.compareWeight(e.suit,t,s)===0?this.rank.compare(e.rank):this.suit.compareWeight(e.suit,t,s)}static groupBy(e,t){return e.reduce((s,a)=>{const r=t(a);return s[r]||(s[r]=[]),s[r].push(a),s},{})}}class M{constructor(e,t,s){k(this,"key");k(this,"game");k(this,"value");this.key=e,this.game=t,this.value=s}compare(e){return this.value-e.value}}class ae{constructor(e,t,s){k(this,"key");k(this,"colorKey");k(this,"value");this.key=e,this.value=s,this.colorKey=t}compare(e){return this.value-e.value}compareWeight(e,t,s){return this.compare(e)===0?0:s&&this.compare(s)===0?1:s&&e.compare(s)===0?-1:this.compare(t)===0?1:e.compare(t)===0?-1:0}}class Se{get clubs(){return new ae(x.CLUBS,ee.BLACK,1)}get diamonds(){return new ae(x.DIAMONDS,ee.RED,2)}get spades(){return new ae(x.SPADES,ee.BLACK,3)}get hearts(){return new ae(x.HEARTS,ee.RED,4)}get two(){return new M(L.TWO,0,2)}get three(){return new M(L.THREE,0,3)}get four(){return new M(L.FOUR,0,4)}get five(){return new M(L.FIVE,0,5)}get six(){return new M(L.SIX,0,6)}get seven(){return new M(L.SEVEN,0,7)}get eight(){return new M(L.EIGHT,0,8)}get nine(){return new M(L.NINE,0,9)}get ten(){return new M(L.TEN,10,10)}get jack(){return new M(L.JACK,1,11)}get queen(){return new M(L.QUEEN,2,12)}get king(){return new M(L.KING,3,13)}get ace(){return new M(L.ACE,4,14)}get ranks(){return[this.two,this.three,this.four,this.five,this.six,this.seven,this.eight,this.nine,this.ten,this.jack,this.queen,this.king,this.ace]}get suits(){return[this.clubs,this.diamonds,this.spades,this.hearts]}get cards(){const e=[];return this.suits.forEach(t=>this.ranks.forEach(s=>e.push(new oe(s,t)))),e}}class de extends Fe{}class fe{constructor(e){k(this,"id");k(this,"cards");k(this,"name");this.id=crypto.randomUUID(),this.name=e,this.cards=[]}compare(e){return this.id===e.id?0:this.name>e.name?1:-1}}class Ke{constructor(e,t,s){k(this,"id");k(this,"name");k(this,"team");k(this,"intelligence");k(this,"hand");this.id=crypto.randomUUID(),this.name=e,this.team=t!=null?t:new fe(e),this.intelligence=s!=null?s:N.HUMAN,this.hand=[]}resetHand(){return this.hand.splice(0,this.hand.length)}reorderHand(){this.hand.sort((e,t)=>-e.compare(t))}play(e){const t=this.hand.findIndex(s=>s.compare(e)===0);if(t<0)throw new Error(o.card.errors.CARD_404);return this.hand.splice(t,1)[0]}takeDeal(e){e.forEach(t=>this.hand.push(t))}takeTrick(e){e.forEach(t=>this.team.cards.push(t))}compare(e){return this.id===e.id?0:this.name>e.name?1:-1}}class ke extends Ve{get teams(){const e=[];for(const t of this.iterator())e.some(s=>s.compare(t.team)===0)||e.push(t.team);return e}get maxHandLength(){let e=0;for(const t of this.iterator())e=Math.max(t.hand.length,e);return e}}class We{constructor(e){k(this,"lead");k(this,"waste",[]);this.lead=e}get leadSuit(){if(!(this.waste.length<1))return this.waste[0].card.suit}getWinningPlay(e){const t=this.leadSuit;if(t){const s=[...this.waste].sort((a,r)=>-a.card.compareWeight(r.card,t,e));return console.debug("[pitch] PitchTrick.getWinner",s),s[0]}else return}static groupPlaysBy(e,t){return e.reduce((s,a)=>{const r=t(a);return s[r]||(s[r]=[]),s[r].push(a),s},{})}}class He{constructor(e){k(this,"leader");k(this,"trump");k(this,"bid");k(this,"tricks");this.leader=e,this.tricks=[]}nextTrick(e){const t=new We(e);return this.tricks.push(t),t}}class $e{constructor(e){k(this,"_factory");this._factory=e}in(e){return e.high+e.low+e.jack+e.game}net(e){const t=this.in(e);return t<e.bid?-e.bid:t}game(e){let t=0;return e.forEach(s=>t+=s.rank.game),t}score(e,t,s){return{calculation:t,bid:t.greatestBid&&t.greatestBid.team.compare(e)===0?t.greatestBid.value:0,high:t.highestTrump&&t.highestTrump.team.compare(e)===0?1:0,low:t.lowestTrump&&t.lowestTrump.team.compare(e)===0?1:0,jack:t.jackiestTrump&&t.jackiestTrump.team.compare(e)===0?1:0,game:t.greatestGame&&(t.greatestGame.teams.length<2||s.isScoreTiedGamePointsEnabled)&&t.greatestGame.teams.some(a=>a.compare(e)===0)?1:0}}calculate(e,t){const s={totalGame:0,lowestTrump:void 0,highestTrump:void 0,jackiestTrump:void 0},a=this._factory.jack;return e.forEach(r=>{s.totalGame+=r.rank.game,r.suit.compare(t)===0&&(!s.jackiestTrump&&r.rank.compare(a)===0&&(s.jackiestTrump=r),(!s.lowestTrump||r.rank.compare(s.lowestTrump.rank)<0)&&(s.lowestTrump=r),(!s.highestTrump||r.rank.compare(s.highestTrump.rank)>0)&&(s.highestTrump=r))}),s}calculateRound(e,t){if(!e.trump||!e.bid||e.tricks.length<6){console.debug("[pitch] PitchCalculator.calculateRound (no trump, no bid or not 6 tricks)",e.trump,e.bid,e.tricks.length);return}if(e.tricks.filter((c,g)=>g<6).some(c=>c.waste.length<t.length)){console.debug("[pitch] PitchCalculator.calculateRound (some trick has less cards than players)",e.tricks.map(c=>c.waste.length),t.length);return}const s={greatestBid:{team:e.bid.bidder.team,value:e.bid.bid},greatestGame:void 0,highestTrump:void 0,lowestTrump:void 0,jackiestTrump:void 0},a=t.teams,r=a.reduce((c,g)=>(c[g.id]=this.calculate(g.cards,e.trump),c),{});return console.debug("[pitch] PitchCalculator.calculateRound calculationsById",r),a.forEach(c=>{const g=r[c.id];if(!s.greatestGame||s.greatestGame.value<g.totalGame?s.greatestGame={teams:[c],value:g.totalGame}:s.greatestGame.value===g.totalGame&&s.greatestGame.teams.push(c),g.highestTrump&&(!s.highestTrump||s.highestTrump.value.compare(g.highestTrump)<0)&&(s.highestTrump={team:c,value:g.highestTrump}),g.lowestTrump&&(!s.lowestTrump||s.lowestTrump.value.compare(g.lowestTrump)>0)&&(s.lowestTrump={team:c,value:g.lowestTrump}),g.jackiestTrump){if(s.jackiestTrump)throw new Error(o.pitch.errors.CALC_500_EXTRA_JACK);s.jackiestTrump={team:c,value:g.jackiestTrump}}}),console.debug("[pitch] PitchCalculator.calculateRound found roundCalc",s),s}}class he{constructor(e,t){k(this,"_scores");k(this,"_calculator");this._scores=e.map(s=>({team:s,scores:[]})),this._calculator=t}getScoresForTeam(e){var t,s;return(s=(t=this._scores.find(a=>a.team.compare(e)===0))==null?void 0:t.scores)!=null?s:[]}getScoresForRound(e){return this._scores.some(t=>t.scores.length<=e)?[]:this._scores.map(t=>({team:t.team,score:t.scores[e]}))}getScoreForTeamAndRound(e,t){const s=this.getScoresForTeam(e);return t<s.length?s[t]:void 0}getScoreTotal(e){let t=0;return this.getScoresForTeam(e).forEach(s=>t+=this._calculator.net(s)),t}getWinner(e){e||(e=ue);const t=this._scores.filter(s=>this.getScoreTotal(s.team)>=e.winningScore).sort(s=>s.scores[s.scores.length-1].bid);if(t.length>0)return t[t.length-1].team}pushScores(e,t){t||(t=ue),e&&this._scores.forEach(s=>{s.scores.push(this._calculator.score(s.team,e,t))})}}class Ue{constructor(e,t,s,a,r,c,g,f){k(this,"_deck");k(this,"_rounds");k(this,"_scoreboard");k(this,"options");k(this,"factory");k(this,"table");k(this,"calculator");k(this,"showCards");this.table=e,this.options=t!=null?t:ue,this.factory=s!=null?s:new Se,this.calculator=a!=null?a:new $e(this.factory),this._deck=r!=null?r:new de(this.factory),this._scoreboard=c!=null?c:new he(this.table.teams,this.calculator),this._rounds=g!=null?g:[],this.showCards=f!=null?f:!1}get deck(){return this._deck}get rounds(){return this._rounds}get scoreboard(){return this._scoreboard}nextRound(e){const t=new He(e);return this.rounds.push(t),t}resetCards(){const e=[];for(const t of this.table.iterator())e.push(...t.hand.splice(0));for(const t of this.table.teams)e.push(...t.cards.splice(0));e.length+this._deck.length!==52&&console.warn("[pitch] someone stole a card... ",this.deck.length," cards in deck, ",e.length," cards from players and teams...",e),this._deck=new de(this.factory)}resetState(){this.resetCards(),this._rounds=[],this._scoreboard=new he(this.table.teams,this.calculator),this.showCards=!1}}class je extends Ge{async playPitch(e,t,s,a,r,c,g,f){let w;for(let C=e.nextRound(e.table.leader);!w;C=e.nextRound(e.table.leader)){e=await this.dealHands(e,f);const y=e.table.peekNextDealer();if(e=await this.takeBids(e,t,s,f),console.debug("[pitch] PitchDealer.playPitch (round.bid)",C.bid),!!C.bid){e.table.setNextLeader(C.bid.bidder);for(let d=C.nextTrick(e.table.leader);e.table.maxHandLength>0;d=C.nextTrick(e.table.leader))if(e=await this.takePlays(e,t,a,f),console.debug("[pitch] PitchDealer.playPitch (round.trump)",C.trump),C.trump){const b=d.getWinningPlay(C.trump);if(console.debug("[pitch] PitchDealer.playPitch (trick.getWinningPlay)",b),b)await r(e,b),e.table.setNextLeader(b.bidder);else throw new Error(o.pitch.errors.STATE_500_NO_TRICK_WINNER)}else throw new Error(o.pitch.errors.STATE_500_NO_TRUMP);e=await this.pushScores(e,c,f),e.table.setNextDealer(y),w=e.scoreboard.getWinner(e.options),console.debug("[pitch] PitchDealer.playPitch (state.scoreboard.getWinner)",w)}}return await g(e,w),e}async dealHands(e,t){e.resetCards(),e.deck.shuffle(void 0,e.options.shuffle);for(const s of[1,2])for(const a of e.table.iterator()){const r=e.deck.pop(),c=e.deck.pop(),g=e.deck.pop();if(r&&c&&g)a.takeDeal([r,c,g]),a.reorderHand(),await t(e);else throw new Error(o.card.errors.DECK_500_EMPTY)}return e}async takeBids(e,t,s,a){var c;const r=e.rounds[e.rounds.length-1];for(const g of e.table.iterator()){e.showCards=await t(e,g),await a(e);let f=await s(e,g),w=0;for(let C=this.validateBid(e,f);C;C=this.validateBid(e,f)){if(await a(e),w++>10)throw new Error(o.pitch.errors.PLAY_400_TOO_MANY_ATTEMPTS);console.debug("[pitch] PitchDealer.takeBids (attempt, reason, bid)",w++,C,f),f=await s(e,g,C)}console.debug("[pitch] PitchDealer.takeBids (bid)",f),f.skip||(r.bid=f),console.debug("[pitch] PitchDealer.takeBids (round.bid)",r.bid),e.showCards=!1,await a(e)}return r.bid&&e.table.setNextLeader((c=r.bid)==null?void 0:c.bidder),e}async takePlays(e,t,s,a){var f;const r=e.rounds[e.rounds.length-1],c=r.tricks[r.tricks.length-1];for(const w of e.table.iterator()){e.showCards=await t(e,w),await a(e,"showing cards to bidder...");let C=await s(e,w),y=0;for(let b=this.validatePlay(e,{bidder:w,card:C});b;b=this.validatePlay(e,{bidder:w,card:C})){if(await a(e,"validation result... "+b),y++>10)throw new Error(o.pitch.errors.PLAY_400_TOO_MANY_ATTEMPTS);console.debug("[pitch] PitchDealer.takePlays (attempt, reason, selectedCard)",y,b,C),C=await s(e,w,b)}console.debug("[pitch] PitchDealer.takePlays (selectedCard)",C);const d=w.play(C);if(console.debug("[pitch] PitchDealer.takePlays (playedCard)",d),await a(e,"card taken from bidder hand..."),!d)throw new Error(o.card.errors.CARD_404);r.trump=(f=r.trump)!=null?f:d.suit,console.debug("[pitch] PitchDealer.takePlays (round.trump)",r.trump),c.waste.push({bidder:w,card:d}),e.showCards=!1,await a(e,"card placed in waste...")}if(!r.trump)throw new Error(o.pitch.errors.STATE_500_NO_TRUMP);const g=c.getWinningPlay(r.trump);if(!g)throw new Error(o.pitch.errors.TRICK_500_NO_WINNER);return g.bidder.team.cards.push(...c.waste.map(w=>w.card)),e.table.setNextLeader(g.bidder),await a(e,"trick completed with winner as next leader..."),e}async pushScores(e,t,s){const a=e.rounds[e.rounds.length-1];console.debug("[pitch] PitchDealer.pushScores (calculating)",a,e.table);const r=e.calculator.calculateRound(a,e.table);return console.debug("[pitch] PitchDealer.pushScores (calculation)",r),r&&(e.scoreboard.pushScores(r,e.options),await s(e),await t(e,r)),await s(e),e}validateBid(e,t){const s=e.rounds[e.rounds.length-1];if(t.skip){if(e.options.isBidNoneEnabled)return;if(Array.from(e.table.iterator())[e.table.length-1].compare(t.bidder)===0&&!s.bid)return ne.NO_BID}else{if(e.options.isBidFiveEnabled&&t.bid>5)return ne.EXCEED_5;if(t.bid>4)return ne.EXCEED_4;if(t.bid<2)return ne.LESS_THAN_2;if(s.bid&&t.bid<=s.bid.bid)return ne.NOT_EXCEED_BID}}validatePlay(e,t){const s=e.rounds[e.rounds.length-1],a=s.tricks[s.tricks.length-1];if(!t.bidder.hand.some(r=>r.compare(t.card)===0))return ve.NOT_IN_HAND;if(!(e.options.isAllowTrumpWhenCanFollowSuitEnabled&&s.trump&&t.card.suit.compare(s.trump)===0)&&a.leadSuit&&t.card.suit.compare(a.leadSuit)!==0&&t.bidder.hand.some(r=>r.suit.compare(a.leadSuit)===0))return ve.NOT_FOLLOWING_SUIT}async retry(e,t,s){return await t.catch(async a=>{if(e<=0)throw a;return s&&s(a),await this.retry(e-1,t)})}}class ze{decideBid(e,t){var c,g;const a=(g=(c=t.rounds[t.rounds.length-1].bid)==null?void 0:c.bid)!=null?g:1;console.debug("[pitch] PitchAIBaby.decideBid",a,e);const r=this.decideWorthBySuit(e.hand,t.factory);return console.debug("[pitch] PitchAIBaby.decideBid",r),r.some(f=>f.worth>a)?(console.log("[pitch] PitchAIBaby.decideBid, AI is bidding",a+1),{bid:a+1,bidder:e,skip:!1}):t.table.last.compare(e)===0&&a<2&&!t.options.isBidNoneEnabled?(console.log("[pitch] PitchAIBaby.decideBid, AI is forced to bid..."),{bid:2,bidder:e,skip:!1}):(console.log("[pitch] PitchAIBaby.decideBid, AI is skipping..."),{bid:0,bidder:e,skip:!0})}decidePlay(e,t){var w,C;const s=t.rounds[t.rounds.length-1],a=s.tricks[s.tricks.length-1],r=[...e.hand];console.debug("[pitch] PitchAIBaby.decidePlay (bidder, hand)",e,r);const c=(w=s.trump)!=null?w:this.decideWorthBySuit(r,t.factory).sort(y=>-y.worth)[0].suit;console.debug("[pitch] PitchAIBaby.decidePlay (given trump, desired trump, lead suit)",s.trump,c,a.leadSuit);const g=(C=a.leadSuit)!=null?C:(s.trump,c),f=r.sort((y,d)=>-y.compareWeight(d,g,t.options.isAllowTrumpWhenCanFollowSuitEnabled?c:void 0));return console.debug("[pitch] PitchAIBaby.decidePlay (lead, sorted)",g,f),f[0]}decideWorthBySuit(e,t){const s=t.ten,a=t.jack,r=t.queen,c=t.king,g=t.ace,f=e.map(d=>d.suit),w=oe.groupBy(e,d=>d.rank.key),C=oe.groupBy(e,d=>d.suit.key),y=oe.groupBy(e,d=>d.rank.key.toString()+d.suit.key.toString());return f.map(d=>{var Z,J,Q,P,v,D,W,p,S,m,G,I;const b=(J=(Z=C[d.key])==null?void 0:Z.length)!=null?J:0;(P=(Q=w[s.key])==null?void 0:Q.length)!=null;const $=(D=(v=y[a.key.toString()+d.key.toString()])==null?void 0:v.length)!=null?D:0,K=(p=(W=y[r.key.toString()+d.key.toString()])==null?void 0:W.length)!=null?p:0,O=(m=(S=y[c.key.toString()+d.key.toString()])==null?void 0:S.length)!=null?m:0,R=(I=(G=y[g.key.toString()+d.key.toString()])==null?void 0:G.length)!=null?I:0;return R>0&&O>0&&K>0&&b>5?{suit:d,worth:5}:$>0&&(O>0||R>0)&&b>3?{suit:d,worth:4}:(R>0||O>0||K>0)&&($>0&&b>2||b>3)?{suit:d,worth:3}:(R>0||O>0)&&b>1||(R>0||O>0||K>0)&&b>2?{suit:d,worth:2}:{suit:d,worth:1}})}}class Ze{selectIntelligence(e){switch(e){case N.ARTIFICIAL:return new ze;default:return}}}const Xe=(i,e)=>e.filter((t,s)=>s<i).map(t=>new fe(t.name)),qe=(i,e,t)=>e.filter((s,a)=>a<i).map((s,a,r)=>{const c=t.length<1||r.length%t.length!==0?new fe(s.name):t[a%t.length];return new Ke(s.name,c,s.intelligence)}),ce=new Se,pe=new $e(ce),Ye=[{name:"Player 1",intelligence:N.ARTIFICIAL},{name:"Player 2",intelligence:N.HUMAN},{name:"Player 3",intelligence:N.ARTIFICIAL},{name:"Player 4",intelligence:N.ARTIFICIAL},{name:"Player 5",intelligence:N.ARTIFICIAL},{name:"Player 6",intelligence:N.ARTIFICIAL},{name:"Player 7",intelligence:N.ARTIFICIAL},{name:"Player 8",intelligence:N.ARTIFICIAL}],Je=[{name:"Team 1"},{name:"Team 2"},{name:"Team 3"},{name:"Team 4"}],ie=De("pitch",{state:()=>({options:{...ue},deck:new de(ce),table:new ke([]),rounds:[],scoreboard:new he([],pe),showCards:!1,teamConfigs:[...Je],bidderConfigs:[...Ye],currentRound:void 0,currentTrick:void 0}),getters:{validIntelligences:()=>[N.HUMAN,N.ARTIFICIAL],validLocales:()=>[Ce.en_US,Ce.vn_VN],validWinningScores:()=>[11,21],validShuffleCounts:()=>[1,2,3,4,5,6,7,8,9],validCutCounts:()=>{const i=[];for(let e=1;e<52;e++)i.push(e);return i},validBidderCounts:()=>[2,3,4,5,6,7,8],validTeamCounts:i=>{const e=[0];return[2,4,6,8].includes(i.options.bidderCount)&&e.push(2),[3,6].includes(i.options.bidderCount)&&e.push(3),[4,8].includes(i.options.bidderCount)&&e.push(4),e},currentBidders:i=>qe(i.options.bidderCount,i.bidderConfigs,Xe(i.options.teamCount,i.teamConfigs)),currentState:i=>new Ue(i.table,i.options,ce,pe,i.deck,i.scoreboard,i.rounds,i.showCards),currentScore:i=>e=>i.scoreboard.getScoreTotal(e)},actions:{initializeState(){this.deck=new de(ce),this.table=new ke(this.currentBidders),this.rounds=[],this.scoreboard=new he(this.table.teams,pe),this.showCards=!1,this.currentRound=void 0,this.currentTrick=void 0},setOptionVerbosity(i){this.options.verbose=i},setOptionWinningScore(i){if(!this.validWinningScores.includes(i))throw new Error(o.pitch.errors.OPTIONS_400);this.options.winningScore=i},setOptionBidderCount(i){if(!this.validBidderCounts.includes(i))throw new Error(o.pitch.errors.OPTIONS_400);this.options.bidderCount=i,this.validTeamCounts.includes(this.options.teamCount)||(this.options.teamCount=0),this.initializeState()},setOptionTeamCount(i){if(!this.validTeamCounts.includes(i))throw new Error(o.pitch.errors.OPTIONS_400);this.options.teamCount=i,this.initializeState()},setTeamConfigName(i,e){if(e>=this.teamConfigs.length)throw new Error(o.pitch.errors.STATE_404_TEAM);this.teamConfigs[e].name=i,this.initializeState()},setTeamConfigs(i){this.teamConfigs=i,this.initializeState()},setBidderConfigName(i,e){if(e>=this.bidderConfigs.length)throw new Error(o.pitch.errors.STATE_404_BIDDER);this.bidderConfigs[e].name=i,this.initializeState()},setBidderConfigIntelligence(i,e){if(e>=this.bidderConfigs.length)throw new Error(o.pitch.errors.STATE_404_BIDDER);this.bidderConfigs[e].intelligence=i,this.initializeState()},setBidderConfigs(i){this.bidderConfigs=i,this.initializeState()},setOptionBidFive(i){this.options.isBidFiveEnabled=i},setOptionBidNone(i){this.options.isBidNoneEnabled=i},setOptionAllowTrumpWhenCanFollowSuit(i){this.options.isAllowTrumpWhenCanFollowSuitEnabled=i},setOptionScoreTiedGamePionts(i){this.options.isScoreTiedGamePointsEnabled=i},setOptionShuffleCount(i){if(!this.validShuffleCounts.includes(i))throw new Error(o.pitch.errors.OPTIONS_400);this.options.shuffle.shuffleCount=i},setOptionCutMin(i){if(!this.validCutCounts.includes(i))throw new Error(o.pitch.errors.OPTIONS_400);this.options.cut.cutMinimum=i},setPitchState(i){this.table=i.table,this.options=i.options,this.deck=i.deck,this.scoreboard=i.scoreboard,this.rounds=i.rounds,this.showCards=i.showCards,this.currentRound=this.rounds[this.rounds.length-1],this.currentTrick=this.currentRound.tricks[this.currentRound.tricks.length-1]}}}),Qe=n("div",{class:"modal-background"},null,-1),et={class:"modal-card"},tt={class:"modal-card-head"},st={class:"modal-card-title"},it={class:"modal-card-body"},nt={class:"modal-card-foot"},me=A({__name:"ModalCard",props:{active:{type:Boolean},titleKey:null,titleParams:null},emits:["close"],setup(i,{emit:e}){const t=i,s=T(()=>t.active?["modal","is-active"]:["modal"]);return(a,r)=>(h(),_("div",{class:te(l(s))},[Qe,n("div",et,[n("header",tt,[n("p",st,u(i.titleParams?a.$t(i.titleKey,[...i.titleParams]):a.$t(i.titleKey)),1),n("button",{class:"delete","aria-label":"close",onClick:r[0]||(r[0]=c=>e("close"))})]),n("section",it,[_e(a.$slots,"default")]),n("footer",nt,[_e(a.$slots,"footer")])])],2))}}),re=A({__name:"ModalAlert",props:{messageKey:null,messageParams:null,titleKey:null,titleParams:null},setup(i){const e=F(!0);function t(){return!0}return(s,a)=>(h(),Y(me,{active:e.value,"title-key":i.titleKey,"title-params":i.titleParams,onClose:a[0]||(a[0]=r=>l(z)(t()))},{default:X(()=>[ge(u(s.$t(i.messageKey,i.messageParams?i.messageParams:[])),1)]),_:1},8,["active","title-key","title-params"]))}}),lt={class:"level"},at={class:"level-item"},rt={class:"level-item"},ot=A({__name:"ModalBooleanPrompt",props:{labelTrue:null,labelFalse:null,message:null,titleKey:null,titleParams:null},setup(i){const e=F(!0);return(t,s)=>(h(),Y(me,{active:e.value,"title-key":i.titleKey,"title-params":i.titleParams,onClose:s[2]||(s[2]=a=>l(z)(!1))},{default:X(()=>[ge(u(i.message),1)]),footer:X(()=>[n("div",lt,[n("div",at,[n("button",{id:"yes-no-prompt-yes",class:"button",onClick:s[0]||(s[0]=a=>l(z)(!0))},u(i.labelTrue),1)]),n("div",rt,[n("button",{id:"yes-no-prompt-no",class:"button",onClick:s[1]||(s[1]=a=>l(z)(!1))},u(i.labelFalse),1)])])]),_:1},8,["active","title-key","title-params"]))}}),ct={xmlns:"http://www.w3.org/2000/svg",style:{width:"24px",height:"24px"},viewBox:"0 0 24 24"},ut=["fill"],dt=["fill"],ht=["fill"],mt=["fill"],pt=["fill"],_t=A({__name:"IconSuitOutline",props:{suit:null,color:null},setup(i){const e=i,t=T(()=>e.color===ee.RED?"red":"black");return(s,a)=>(h(),_("svg",ct,[i.suit===l(x).CLUBS?(h(),_("path",{key:0,fill:l(t),d:"M16.6 9.5C16.8 8.9 17 8.2 17 7.5C17 4.5 14.8 2 12 2S7 4.5 7 7.5C7 8.2 7.1 8.9 7.4 9.5C4.9 9.6 3 11.4 3 13.8C3 16.3 5 18 7.5 18C7.5 18 10 18 11 17C11 17 11.3 19 9 22H15C12.7 19 13 17 13 17C14 18 16.5 18 16.5 18C19 18 21 16.3 21 13.8C21 11.4 19.1 9.6 16.6 9.5M16.5 16C16.5 16 14 16 13 15H11C10 16 7.5 16 7.5 16C6.3 16 5 15.3 5 13.8C5 12.5 6.1 11.5 7.5 11.5C7.8 11.5 8.3 11.6 8.8 11.7C8.9 11.7 9 11.8 9.1 11.8L10 10.1C9.8 9.9 9.7 9.7 9.6 9.5C9.2 8.9 9 8.3 9 7.5C9 5.6 10.3 4 12 4S15 5.6 15 7.5C15 8.3 14.8 9 14.4 9.6C14.3 9.8 14.2 9.9 14.1 10.1L15 11.8C15.1 11.8 15.2 11.7 15.3 11.7C15.7 11.6 16.2 11.5 16.6 11.5C18 11.5 19.1 12.5 19.1 13.8C19 15.3 17.7 16 16.5 16Z"},null,8,ut)):i.suit===l(x).DIAMONDS?(h(),_("path",{key:1,fill:l(t),d:"M12 2L5 12L12 22L19 12M7.44 12L12 5.5L16.56 12L12 18.5"},null,8,dt)):i.suit===l(x).HEARTS?(h(),_("path",{key:2,fill:l(t),d:"M12.1 18.55L12 18.65L11.89 18.55C7.14 14.24 4 11.39 4 8.5C4 6.5 5.5 5 7.5 5C9.04 5 10.54 6 11.07 7.36H12.93C13.46 6 14.96 5 16.5 5C18.5 5 20 6.5 20 8.5C20 11.39 16.86 14.24 12.1 18.55M16.5 3C14.76 3 13.09 3.81 12 5.08C10.91 3.81 9.24 3 7.5 3C4.42 3 2 5.41 2 8.5C2 12.27 5.4 15.36 10.55 20.03L12 21.35L13.45 20.03C18.6 15.36 22 12.27 22 8.5C22 5.41 19.58 3 16.5 3Z"},null,8,ht)):i.suit===l(x).SPADES?(h(),_("path",{key:3,fill:l(t),d:"M11 17C11 17 11.3 19 9 22H15C12.7 19 13 17 13 17S14 18 16 18 20 16 20 14C20 9 15 7 12 2C9 7 4 9 4 14C4 16 6 18 8 18S11 17 11 17M13 14H11C11 14 10 16 8 16C7.1 16 6 14.9 6 14C5.8 11 9.9 8.2 12 5.4C14.1 8.1 18.2 10.9 18 14C18 14.9 16.9 16 16 16C14 16 13 14 13 14Z"},null,8,mt)):(h(),_("path",{key:4,fill:l(t),d:"M11,18H13V16H11V18M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,6A4,4 0 0,0 8,10H10A2,2 0 0,1 12,8A2,2 0 0,1 14,10C14,12 11,11.75 11,15H13C13,12.75 16,12.5 16,10A4,4 0 0,0 12,6Z"},null,8,pt))]))}}),gt={id:"pitch-scoreboard",class:"columns"},ft={id:"pitch-scoreboard-game",class:"column"},bt={id:"pitch-scoreboard-scores-table",class:"table"},vt={id:"pitch-scoreboard-round",class:"column"},Ct={id:"pitch-scoreboard-round-table",class:"table"},wt=A({__name:"PitchScoreboard",setup(i){const{table:e,rounds:t,currentScore:s,currentRound:a}=se(ie());F(!0);const r=T(()=>{var f,w;return(w=(f=a.value)==null?void 0:f.trump)==null?void 0:w.key}),c=T(()=>{var f,w;return(w=(f=a.value)==null?void 0:f.trump)==null?void 0:w.colorKey}),g=T(()=>{var w;const f=(w=a.value)==null?void 0:w.bid;return f?`${f.bid} (${f.bidder.name})`:""});return(f,w)=>(h(),_("div",gt,[n("div",ft,[n("table",bt,[n("thead",null,[n("tr",null,[n("th",null,u(f.$t(l(o).label_team)),1),(h(!0),_(E,null,B(l(e).teams,C=>(h(),_("td",null,u(C.name),1))),256))])]),n("tfoot",null,[n("tr",null,[n("th",null,u(f.$t(l(o).label_total)),1),(h(!0),_(E,null,B(l(e).teams,C=>(h(),_("td",null,u(l(s)(C)),1))),256))])])])]),n("div",vt,[n("table",Ct,[n("thead",null,[n("tr",null,[n("th",null,u(f.$t(l(o).label_trump)),1),n("th",null,u(f.$t(l(o).label_bid)),1),n("th",null,u(f.$t(l(o).label_round)),1)])]),n("tbody",null,[n("tr",null,[n("td",null,[l(r)&&l(c)?(h(),Y(_t,{key:0,suit:l(r),color:l(c)},null,8,["suit","color"])):le("",!0)]),n("td",null,u(l(g)),1),n("td",null,u(l(t).length),1)])])])])]))}}),kt={xmlns:"http://www.w3.org/2000/svg",style:{width:"24px",height:"24px"},viewBox:"0 0 24 24"},yt=["fill"],Tt=["fill"],Pt=["fill"],St=["fill"],$t=["fill"],ye=A({__name:"IconSuitSolid",props:{suit:null,color:null},setup(i){const e=i,t=T(()=>e.color===ee.RED?"red":"black");return(s,a)=>(h(),_("svg",kt,[i.suit===l(x).CLUBS?(h(),_("path",{key:0,fill:l(t),d:"M12,2C14.3,2 16.3,4 16.3,6.2C16.21,8.77 14.34,9.83 14.04,10C15.04,9.5 16.5,9.5 16.5,9.5C19,9.5 21,11.3 21,13.8C21,16.3 19,18 16.5,18C16.5,18 15,18 13,17C13,17 12.7,19 15,22H9C11.3,19 11,17 11,17C9,18 7.5,18 7.5,18C5,18 3,16.3 3,13.8C3,11.3 5,9.5 7.5,9.5C7.5,9.5 8.96,9.5 9.96,10C9.66,9.83 7.79,8.77 7.7,6.2C7.7,4 9.7,2 12,2Z"},null,8,yt)):i.suit===l(x).DIAMONDS?(h(),_("path",{key:1,fill:l(t),d:"M19,12L12,22L5,12L12,2"},null,8,Tt)):i.suit===l(x).HEARTS?(h(),_("path",{key:2,fill:l(t),d:"M12,21.35L10.55,20.03C5.4,15.36 2,12.27 2,8.5C2,5.41 4.42,3 7.5,3C9.24,3 10.91,3.81 12,5.08C13.09,3.81 14.76,3 16.5,3C19.58,3 22,5.41 22,8.5C22,12.27 18.6,15.36 13.45,20.03L12,21.35Z"},null,8,Pt)):i.suit===l(x).SPADES?(h(),_("path",{key:3,fill:l(t),d:"M12,2C9,7 4,9 4,14C4,16 6,18 8,18C9,18 10,18 11,17C11,17 11.32,19 9,22H15C13,19 13,17 13,17C14,18 15,18 16,18C18,18 20,16 20,14C20,9 15,7 12,2Z"},null,8,St)):(h(),_("path",{key:4,fill:l(t),d:"M15.07,11.25L14.17,12.17C13.45,12.89 13,13.5 13,15H11V14.5C11,13.39 11.45,12.39 12.17,11.67L13.41,10.41C13.78,10.05 14,9.55 14,9C14,7.89 13.1,7 12,7A2,2 0 0,0 10,9H8A4,4 0 0,1 12,5A4,4 0 0,1 16,9C16,9.88 15.64,10.67 15.07,11.25M13,19H11V17H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12C22,6.47 17.5,2 12,2Z"},null,8,$t))]))}}),Et={key:0,class:"playing-card-face is-nw"},Bt={key:1,class:"playing-card-face is-ne"},At={key:2,class:"playing-card-face is-sw"},It={key:3,class:"playing-card-face is-se"},Dt=A({__name:"PitchCard",props:{card:null,show:{type:Boolean}},setup(i){return(e,t)=>(h(),_("div",{id:"pitch-card",class:te(["card","box","is-hoverable","playing-card",i.show?"face-up":"face-down"])},[i.show?(h(),_("span",Et,u(e.$t(l(o).mapCardRank(i.card.rank.key))),1)):le("",!0),i.show?(h(),_("span",Bt,[j(ye,{suit:i.card.suit.key,color:i.card.suit.colorKey},null,8,["suit","color"])])):le("",!0),i.show?(h(),_("span",At,[j(ye,{suit:i.card.suit.key,color:i.card.suit.colorKey},null,8,["suit","color"])])):le("",!0),i.show?(h(),_("span",It,u(e.$t(l(o).mapCardRank(i.card.rank.key))),1)):le("",!0)],2))}});const Ee=Ne(Dt,[["__scopeId","data-v-80e743d0"]]),Nt={id:"pitch-trick",class:"columns is-multiline is-centered is-mobile"},Lt={class:"column is-narrow"},Mt={key:0,class:"tags"},Ot={class:"tag is-primary"},Rt={key:1,class:"tags has-addons"},xt={class:"tag is-primary"},Ft={class:"tag is-light"},Gt=A({__name:"PitchTrick",setup(i){const{currentTrick:e}=se(ie());return(t,s)=>{var a,r;return h(),_("div",Nt,[(h(!0),_(E,null,B((r=(a=l(e))==null?void 0:a.waste)!=null?r:[],c=>(h(),_("div",Lt,[j(Ee,{card:c.card,show:!0},null,8,["card"]),c.bidder.name===c.bidder.team.name?(h(),_("div",Mt,[n("span",Ot,u(c.bidder.name),1)])):(h(),_("div",Rt,[n("span",xt,u(c.bidder.name),1),n("span",Ft,u(c.bidder.team.name),1)]))]))),256))])}}}),Vt={class:"level is-mobile",id:"pitch-messages"},Kt=A({__name:"PitchFooter",emits:["play","config","exit"],setup(i,{emit:e}){return(t,s)=>(h(),_("div",Vt,[n("button",{class:"level-item button",onClick:s[0]||(s[0]=a=>e("play"))},u(t.$t(l(o).label_play)),1),n("button",{class:"level-item button",onClick:s[1]||(s[1]=a=>e("config"))},u(t.$t(l(o).label_configure)),1),n("button",{class:"level-item button",onClick:s[2]||(s[2]=a=>e("exit"))},u(t.$t(l(o).label_exit)),1)]))}}),Wt={class:"container"},Ht={class:"content"},Ut=n("div",{class:"block"},null,-1),jt={id:"pitch-hand-cards",class:"content"},zt={class:"columns is-multiline is-centered is-mobile"},Zt={class:"column is-narrow"},Xt=n("div",{class:"block"},null,-1),Be=A({__name:"PitchHandWrapper",props:{bidder:null},emits:["selectCardIndex"],setup(i,{emit:e}){const{showCards:t}=se(ie());return(s,a)=>(h(),_("div",Wt,[n("div",Ht,[_e(s.$slots,"default")]),Ut,n("div",jt,[n("div",zt,[(h(!0),_(E,null,B(i.bidder.hand,(r,c)=>(h(),_("div",Zt,[j(Ee,{card:r,show:l(t),onClick:g=>e("selectCardIndex",r,c,...i.bidder.hand)},null,8,["card","show","onClick"])]))),256)),Xt])])]))}}),qt={class:"container"},Yt={id:"pitch-bid-bid",class:"content"},Jt={class:"select"},Qt=["disabled","selected","value"],es={id:"pitch-bid-submit",class:"content level is-mobile"},ts=["disabled"],ss=A({__name:"PitchBidPrompt",props:{bidder:null},setup(i){const e=i,{currentState:t,currentRound:s,currentTrick:a}=se(ie()),r=F(0),c=F(!0),g=T(()=>{var d;return t.value.options.isBidNoneEnabled||((d=s.value)==null?void 0:d.bid)||t.value.table.last.compare(e.bidder)!==0}),f=T(()=>{var b;const d=(b=s.value)==null?void 0:b.bid;return[{bid:2,enabled:!d||d.bid<2},{bid:3,enabled:!d||d.bid<3},{bid:4,enabled:!d||d.bid<4},{bid:5,enabled:t.value.options.isBidFiveEnabled&&(!d||d.bid<5)}]});function w(){return c.value=!1,{bidder:e.bidder,bid:r.value,skip:!1}}function C(){c.value=!1,z(w())}function y(){c.value=!1,z({bidder:e.bidder,bid:0,skip:!0})}return(d,b)=>(h(),Y(Be,{bidder:i.bidder},{default:X(()=>[n("div",qt,[n("section",Yt,[ge(u(d.$t(l(o).message_bid_for,[i.bidder.name]))+" ",1),n("div",Jt,[H(n("select",{"onUpdate:modelValue":b[0]||(b[0]=$=>r.value=$)},[(h(!0),_(E,null,B(l(f),$=>(h(),_("option",{disabled:!$.enabled,selected:$.bid===r.value,value:$.bid},u($.bid),9,Qt))),256))],512),[[U,r.value]])])]),n("section",es,[n("button",{class:"level-item button is-success",onClick:b[1]||(b[1]=$=>C())},u(d.$t(l(o).label_bid_submit)),1),n("button",{class:"level-item button",disabled:!l(g),onClick:b[2]||(b[2]=$=>y())},u(d.$t(l(o).label_bid_skip)),9,ts)])])]),footer:X(()=>[]),_:1},8,["bidder"]))}}),is={class:"level"},ns=n("div",{class:"block"},null,-1),ls=A({__name:"PitchHandPrompt",props:{bidder:null},setup(i){const e=F(0);F(!0);function t(s,a){e.value=a,z(s)}return(s,a)=>(h(),Y(Be,{bidder:i.bidder,onSelectCardIndex:t},{default:X(()=>[n("div",is,[n("p",null,u(s.$t(l(o).message_play_for,[i.bidder.name])),1)]),ns]),_:1},8,["bidder"]))}}),as={class:"subtitle"},rs={class:"column"},os=["value","onChange"],cs={class:"column is-one-fourth"},us={class:"select is-small"},ds=["onUpdate:modelValue","on:update:modelValue"],hs=["selected","value"],ms={class:"subtitle"},ps={class:"column"},_s=["value","onChange"],gs={id:"state-options",class:"section box"},fs={class:"subtitle"},bs={class:"tile is-parent is-12"},vs={class:"tile is-child is-6"},Cs={class:"tile is-child container"},ws={class:"select is-small"},ks=["selected","value"],ys={class:"tile is-parent is-12"},Ts={class:"tile is-child is-6"},Ps={class:"tile is-child container"},Ss={class:"select is-small"},$s=["selected","value"],Es={class:"tile is-parent is-12"},Bs={class:"tile is-child is-6"},As={class:"tile is-child container"},Is={class:"select is-small"},Ds=["selected","value"],Ns={class:"tile is-parent is-12"},Ls={class:"tile is-child is-6"},Ms={class:"tile is-child container"},Os={class:"select is-small"},Rs=["selected","value"],xs={class:"tile is-parent is-12"},Fs={class:"tile is-child is-6"},Gs={class:"tile is-child container"},Vs={class:"select is-small"},Ks=["selected","value"],Ws={class:"tile is-parent is-12"},Hs={class:"tile is-child is-6"},Us={class:"tile is-child container"},js={class:"select is-small"},zs=["selected","value"],Zs={class:"tile is-parent is-12"},Xs={class:"tile is-child is-6"},qs={class:"tile is-child"},Ys={class:"select is-small"},Js=["selected","value"],Qs={class:"tile is-parent is-12"},ei={class:"tile is-child is-6"},ti={class:"tile is-child container"},si={class:"select is-small"},ii=["selected","value"],ni=A({__name:"PitchConfigPrompt",setup(i){const e=ie(),{currentState:t,validBidderCounts:s,validTeamCounts:a,validShuffleCounts:r,validCutCounts:c,validIntelligences:g,validWinningScores:f}=se(e);F(!0),T({get(){return t.value.options.verbose},set(p){e.setOptionVerbosity(p)}});const w=T({get(){return t.value.options.winningScore},set(p){e.setOptionWinningScore(p)}}),C=T({get(){return t.value.options.bidderCount},set(p){e.setOptionBidderCount(p)}}),y=T({get(){return t.value.options.teamCount},set(p){e.setOptionTeamCount(p)}}),d=T({get(){return e.teamConfigs},set(p){e.setTeamConfigs(p)}}),b=T({get(){return e.bidderConfigs},set(p){e.setBidderConfigs(p)}}),$=T({get(){return t.value.options.isBidFiveEnabled},set(p){e.setOptionBidFive(p)}}),K=T({get(){return t.value.options.isBidNoneEnabled},set(p){e.setOptionBidNone(p)}}),O=T({get(){return t.value.options.isAllowTrumpWhenCanFollowSuitEnabled},set(p){e.setOptionAllowTrumpWhenCanFollowSuit(p)}}),R=T({get(){return t.value.options.isScoreTiedGamePointsEnabled},set(p){e.setOptionScoreTiedGamePionts(p)}}),Z=T({get(){return t.value.options.shuffle.shuffleCount},set(p){e.setOptionShuffleCount(p)}});T({get(){return t.value.options.cut.cutMinimum},set(p){e.setOptionCutMin(p)}});function J(p,S){p<d.value.length&&e.setTeamConfigName(S,p)}function Q(p,S){p<b.value.length&&e.setBidderConfigName(S,p)}function P(p,S){p<b.value.length&&e.setBidderConfigIntelligence(S,p)}function v(p){switch(p){case N.ARTIFICIAL:return o.label_artificial;case N.HUMAN:return o.label_human}}function D(){z(W())}function W(){return!0}return(p,S)=>(h(),Y(me,{"title-key":l(o).pitch.title_configuration,active:!0,onClose:D},{default:X(()=>[n("section",{id:"state-table-bidders",class:te(l(C)>0?"section box":"is-hidden")},[n("h3",as,u(p.$t(l(o).pitch.subtitle_configuration_bidders)),1),(h(!0),_(E,null,B(l(b).filter((m,G)=>G<l(C)),(m,G)=>(h(),_("div",{class:"columns is-mobile",key:m.name},[n("div",rs,[n("input",{class:"input is-small",id:"state-table-bidder-name",type:"text",value:m.name,onChange:I=>Q(G,I.target.value)},null,40,os)]),n("div",cs,[n("div",us,[H(n("select",{id:"state-table-bidder-intelligence","onUpdate:modelValue":I=>m.intelligence=I,"on:update:modelValue":I=>P(G,I)},[(h(!0),_(E,null,B(l(g),I=>(h(),_("option",{selected:I===m.intelligence,value:I},u(p.$t(v(I))),9,hs))),256))],40,ds),[[U,m.intelligence]])])])]))),128))],2),n("section",{id:"state-table-teams",class:te(l(y)>0?"section box":"is-hidden")},[n("h3",ms,u(p.$t(l(o).pitch.subtitle_configuration_teams)),1),(h(!0),_(E,null,B(l(d).filter((m,G)=>G<l(y)),(m,G)=>(h(),_("div",{class:"columns is-mobile",key:m.name},[n("div",ps,[n("input",{class:"input is-small",id:"state-table-team-name",type:"text",value:m.name,onChange:I=>{var be;return J(G,(be=I==null?void 0:I.target)==null?void 0:be.value)}},null,40,_s)])]))),128))],2),n("section",gs,[n("h3",fs,u(p.$t(l(o).pitch.subtitle_configuration_options)),1),n("div",bs,[n("div",vs,[n("label",null,u(p.$t(l(o).label_option_winning_score)),1)]),n("div",Cs,[n("div",ws,[H(n("select",{id:"state-options-winning-score","onUpdate:modelValue":S[0]||(S[0]=m=>q(w)?w.value=m:null)},[(h(!0),_(E,null,B(l(f),m=>(h(),_("option",{selected:m===l(w),value:m},u(m),9,ks))),256))],512),[[U,l(w)]])])])]),n("div",ys,[n("div",Ts,[n("label",null,u(p.$t(l(o).label_option_player_count)),1)]),n("div",Ps,[n("div",Ss,[H(n("select",{id:"state-options-bidder-count","onUpdate:modelValue":S[1]||(S[1]=m=>q(C)?C.value=m:null)},[(h(!0),_(E,null,B(l(s),m=>(h(),_("option",{selected:m===l(C),value:m},u(m),9,$s))),256))],512),[[U,l(C)]])])])]),n("div",Es,[n("div",Bs,[n("label",null,u(p.$t(l(o).label_option_team_count)),1)]),n("div",As,[n("div",Is,[H(n("select",{id:"state-options-team-count","onUpdate:modelValue":S[2]||(S[2]=m=>q(y)?y.value=m:null)},[(h(!0),_(E,null,B(l(a),m=>(h(),_("option",{selected:m===l(y),value:m},u(m),9,Ds))),256))],512),[[U,l(y)]])])])]),n("div",Ns,[n("div",Ls,[n("label",null,u(p.$t(l(o).label_option_bid_5)),1)]),n("div",Ms,[n("div",Os,[H(n("select",{id:"state-options-enable-bid5","onUpdate:modelValue":S[3]||(S[3]=m=>q($)?$.value=m:null)},[(h(),_(E,null,B([!0,!1],m=>n("option",{selected:m===l($),value:m},u(p.$t(m?l(o).label_enabled:l(o).label_disabled)),9,Rs)),64))],512),[[U,l($)]])])])]),n("div",xs,[n("div",Fs,[n("label",null,u(p.$t(l(o).label_option_bid_all_skip)),1)]),n("div",Gs,[n("div",Vs,[H(n("select",{id:"state-options-enable-bid-all-skip","onUpdate:modelValue":S[4]||(S[4]=m=>q(K)?K.value=m:null)},[(h(),_(E,null,B([!0,!1],m=>n("option",{selected:m===l(K),value:m},u(p.$t(m?l(o).label_enabled:l(o).label_disabled)),9,Ks)),64))],512),[[U,l(K)]])])])]),n("div",Ws,[n("div",Hs,[n("label",null,u(p.$t(l(o).label_option_play_trump_despite_lead)),1)]),n("div",Us,[n("div",js,[H(n("select",{id:"state-options-enable-trump-over-lead","onUpdate:modelValue":S[5]||(S[5]=m=>q(O)?O.value=m:null)},[(h(),_(E,null,B([!0,!1],m=>n("option",{selected:m===l(O),value:m},u(p.$t(m?l(o).label_enabled:l(o).label_disabled)),9,zs)),64))],512),[[U,l(O)]])])])]),n("div",Zs,[n("div",Xs,[n("label",null,u(p.$t(l(o).label_option_score_tied_game)),1)]),n("div",qs,[n("div",Ys,[H(n("select",{id:"state-options-enable-score-tied-game","onUpdate:modelValue":S[6]||(S[6]=m=>q(R)?R.value=m:null)},[(h(),_(E,null,B([!0,!1],m=>n("option",{selected:m===l(R),value:m},u(p.$t(m?l(o).label_enabled:l(o).label_disabled)),9,Js)),64))],512),[[U,l(R)]])])])]),n("div",Qs,[n("div",ei,[n("label",null,u(p.$t(l(o).label_option_shuffle_count)),1)]),n("div",ti,[n("div",si,[H(n("select",{id:"state-options-shuffle-count","onUpdate:modelValue":S[7]||(S[7]=m=>q(Z)?Z.value=m:null)},[(h(!0),_(E,null,B(l(r),m=>(h(),_("option",{selected:m===l(Z),value:m},u(m),9,ii))),256))],512),[[U,l(Z)]])])])])])]),footer:X(()=>[n("button",{class:"button",type:"submit",onClick:D},u(p.$t(l(o).label_exit_configuration)),1)]),_:1},8,["title-key"]))}}),li={class:"table"},ai=n("th",null,null,-1),ri={class:"table"},oi=n("th",null,null,-1),ci=A({__name:"PitchRoundAlert",props:{calculator:null,calculation:null,options:null},setup(i){const e=i,{t}=Le({useScope:"global"}),s=F(!0),a=T(()=>e.calculation.greatestBid?{team:e.calculation.greatestBid.team.name,value:e.calculation.greatestBid.value.toString()}:{team:t(o.field_none),value:t(o.field_none)}),r=T(()=>e.calculation.highestTrump?{team:e.calculation.highestTrump.team.name,value:C(e.calculation.highestTrump.value)}:{team:t(o.field_none),value:t(o.field_none)}),c=T(()=>e.calculation.lowestTrump?{team:e.calculation.lowestTrump.team.name,value:C(e.calculation.lowestTrump.value)}:{team:t(o.field_none),value:t(o.field_none)}),g=T(()=>e.calculation.jackiestTrump?{team:e.calculation.jackiestTrump.team.name,value:C(e.calculation.jackiestTrump.value)}:{team:t(o.field_none),value:t(o.field_none)}),f=T(()=>{if(e.calculation.greatestGame){let d="";return e.calculation.greatestGame.teams.forEach(b=>d+=b.name+"|"),{team:d.substring(0,d.length-1),value:e.calculation.greatestGame.value}}else return{team:t(o.field_none),value:t(o.field_none)}}),w=T(()=>{let d=[];return e.calculation.greatestGame&&e.calculation.greatestGame.teams.forEach(b=>d.push(b)),e.calculation.greatestBid&&!d.some(b=>b.compare(e.calculation.greatestBid.team)===0)&&d.push(e.calculation.greatestBid.team),e.calculation.highestTrump&&!d.some(b=>b.compare(e.calculation.highestTrump.team)===0)&&d.push(e.calculation.highestTrump.team),e.calculation.lowestTrump&&!d.some(b=>b.compare(e.calculation.lowestTrump.team)===0)&&d.push(e.calculation.lowestTrump.team),e.calculation.jackiestTrump&&!d.some(b=>b.compare(e.calculation.jackiestTrump.team)===0)&&d.push(e.calculation.jackiestTrump.team),d});function C(d){return t(o.mapCardRank(d.rank.key))+" "+t(o.mapCardSuit(d.suit.key))}function y(){return s.value=!1,!0}return(d,b)=>(h(),Y(me,{"title-key":l(o).title_round_over,active:s.value,onClose:b[0]||(b[0]=$=>l(z)(y()))},{default:X(()=>[n("table",li,[n("thead",null,[n("tr",null,[ai,n("th",null,u(l(t)(l(o).label_bid)),1),n("th",null,u(l(t)(l(o).label_high)),1),n("th",null,u(l(t)(l(o).label_low)),1),n("th",null,u(l(t)(l(o).label_jack)),1),n("th",null,u(l(t)(l(o).label_game)),1)])]),n("tbody",null,[n("tr",null,[n("th",null,u(l(t)(l(o).label_value)),1),n("td",null,u(l(a).value),1),n("td",null,u(l(r).value),1),n("td",null,u(l(c).value),1),n("td",null,u(l(g).value),1),n("td",null,u(l(f).value),1)]),n("tr",null,[n("th",null,u(l(t)(l(o).label_team)),1),n("td",null,u(l(a).team),1),n("td",null,u(l(r).team),1),n("td",null,u(l(c).team),1),n("td",null,u(l(g).team),1),n("td",null,u(l(f).team),1)])])]),n("table",ri,[n("thead",null,[n("tr",null,[oi,(h(!0),_(E,null,B(l(w),$=>(h(),_("th",null,u($.name),1))),256))])]),n("tbody",null,[n("tr",null,[n("th",null,u(l(t)(l(o).label_netscore)),1),(h(!0),_(E,null,B(l(w),$=>(h(),_("td",null,u(i.calculator.net(i.calculator.score($,i.calculation,i.options))),1))),256))])])])]),_:1},8,["title-key","active"]))}}),ui={class:"container"},di={class:"content level"},Te=A({__name:"PitchAlert",props:{closeKey:null,messageKey:null,messageParams:null,messageClasses:null},setup(i){function e(){return!0}return(t,s)=>{var a;return h(),_("div",ui,[n("div",di,[n("p",{class:te(["level-item"].concat(...(a=i.messageClasses)!=null?a:[]))},u(i.messageParams?t.$t(i.messageKey,i.messageParams):t.$t(i.messageKey)),3),n("button",{class:"level-item button",onClick:s[0]||(s[0]=r=>l(z)(e()))},u(t.$t(i.closeKey)),1)])])}}});const hi={id:"pitch-game",class:"container"},mi={id:"pitch-game-scoreboard",class:"section box"},pi={id:"pitch-game-trick",class:"section box"},_i={id:"pitch-game-messages",class:""},gi=A({__name:"PitchGame",setup(i){const e=Oe(),t=ie(),{currentState:s}=se(t),a=F([]),r=new Ze,c=F(!1);function g(P){console.error(P),a.value.unshift(...P.map(v=>({text:v,classes:["has-text-danger-dark"]})))}function f(P){console.log(P),a.value.unshift(...P.map(v=>({text:v,classes:["has-text-success-dark"]})))}function w(){a.value=[]}async function C(){await V(ni,{})}async function y(){const P=new je;try{t.initializeState(),await P.playPitch(s.value,$,Z,J,K,O,R,Q),await d()}catch(v){console.error(v),v&&v.message&&(await V(re,{titleKey:o.title_error,messageKey:o.message_error_of,messageParams:[v.message]}),g([v.message]))}}async function d(){await V(ot,{titleKey:"Game Over",message:"Would you like to play again",labelTrue:"Yes",labelFalse:"No"})?await y():await b()}async function b(){e.push("/")}async function $(P,v){return r.selectIntelligence(v.intelligence)?!0:await V(re,{titleKey:o.title_turn_for,titleParams:[v.name],messageKey:o.message_turn_for,messageParams:[v.name]})}async function K(P,v){console.debug("[components.pitch] PitchGame.alertOfTrickResult",v),await V(Te,{closeKey:o.label_continue,messageKey:o.message_trick_winner_for,messageParams:[v.bidder.name]},"pitch-notice")}async function O(P,v){console.debug("[components.pitch] PitchGame.alertOfRoundResult",v),await V(ci,{calculator:P.calculator,calculation:v,options:P.options},"pitch-notice")}async function R(P,v){console.debug("[components.pitch] PitchGame.alertOfGameResult",v),await V(Te,{closeKey:o.label_continue,messageKey:o.message_winner_for,messageParams:[v.name]},"pitch-notice")}async function Z(P,v,D){let W=r.selectIntelligence(v.intelligence);if(W)return W.decideBid(v,P);{D&&await V(re,{titleKey:`${v.name}: Invalid Bid`,messageKey:o.mapPitchBidValidation(D)}),c.value=!0;const p=await V(ss,{bidder:v},"pitch-hand");return c.value=!1,p}}async function J(P,v,D){let W=r.selectIntelligence(v.intelligence);return W?W.decidePlay(v,P):(D&&await V(re,{titleKey:`${v.name}: Invalid Play`,messageKey:o.mapPitchPlayValidation(D)}),c.value=!0,await V(ls,{bidder:v},"pitch-hand").then(p=>(c.value=!1,p)))}async function Q(P,v){v&&f([v]),t.setPitchState(P)}return Me(()=>C()),(P,v)=>(h(),_("div",hi,[n("header",mi,[j(wt)]),n("section",pi,[j(Gt),j(l(we),{name:"pitch-notice","transition-attrs":{name:"pitch-hand"}})]),n("section",{id:"pitch-game-move",class:te(c.value?["section","box"]:["hidden"])},[j(l(we),{name:"pitch-hand","transition-attrs":{name:"pitch-hand"}})],2),n("footer",_i,[j(Kt,{messages:a.value,onPlay:v[0]||(v[0]=D=>y()),onClear:v[1]||(v[1]=D=>w()),onConfig:v[2]||(v[2]=D=>C()),onExit:v[3]||(v[3]=D=>b())},null,8,["messages"])])]))}}),fi={class:"pitch"},Ci=A({__name:"PitchView",setup(i){const e=F(!0);return(t,s)=>(h(),_("div",fi,[j(gi,{modelValue:e.value,"onUpdate:modelValue":s[0]||(s[0]=a=>e.value=a)},null,8,["modelValue"])]))}});export{Ci as default};
